package nec_Main

import BossEvent
import DayCycle
import public General
import nec_Ghoul
import nec_Archer
import nec_Zombie
import nec_Mage
import public TimerUtils

unit theNecromancer

init
    TheNecromancer.gameInit()

class TheNecromancer

//========================================================================================================================================

    // Fight Settings
    

    // Other Settings
    static constant real MAINLOOP_FREQ = 0.25
    static constant vec2 hunterSpawn = vec2(-13650, 7600)

//========================================================================================================================================

    // Some constants

    static trigger  trg_Death
    static boolean  isIdle      = false
    static boolean  canAttack   = false

    static timer    timer_MainLoop

    private static rect     camBounds = gg_rct_TheNec_CamBounds

//______________________________________________________________________________________________________________________________________________________________________________


// Phase 1 ______________________________________________
    static function phase1()
        
        Ghoul.deactivate()

        // Start Mob Spawn
        // Start Cauldron Timer
        


// Phase 2 ______________________________________________

    static function phase2()

// Phase 3 ______________________________________________

    static function phase3()

       


// Idle Functions______________________________________________
    private static function idle()
       
    
    static function setIdle(real delay)
       

        
// Death Function_____________________________________________
    static function someoneDies() returns boolean
        skip
        return false
       


// Event Initiation__________________________________________________________________________________
    

    // Start Fight
    static function initFight()
        hunter.unpause()

        //timer_MainLoop.startPeriodic( MAINLOOP_FREQ, function phase1 )
        timer_MainLoop.start( 30, function phase1 )


    // Setup Fight
    static function onEventInit()
        moveHunter(hunterSpawn, camBounds, hunterSpawn)

        // Creating Timers
        timer_MainLoop = getTimer()
        Ghoul.activate()
        Archer.activate()
        Zombie.activate()
        Mage.activate()

        Ghoul.startSpawn()
        Archer.startSpawn()
        Zombie.startSpawn()
        Mage.startSpawn()


    
    // Event init
    static function initEvent() returns boolean
        BossEvent.initiate( function onEventInit, function initFight )
        return false
        

// Clear Event _____________________________________________________________________
    static function clearEvent()
        timer_MainLoop.release()



// On Game Init ____________________________________________________________________
    static function gameInit()

        CreateTrigger()
        ..registerPlayerChatEvent(Player(0), "-thenecromancer", true)
        ..addCondition(Condition(function TheNecromancer.initEvent ))

        trg_Death = CreateTrigger()
        ..registerAnyUnitEvent(EVENT_PLAYER_UNIT_DEATH)
        ..addCondition( Condition( function TheNecromancer.someoneDies ))
        ..disable()