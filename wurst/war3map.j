//===========================================================================
// 
// Boss Hunter
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Thu Oct 11 21:30:40 2018
//   Map Author: Lake
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

globals
    // User-defined
    location                udg_tempPoint              = null
    effect                  udg_NecroSFX               = null
    unit                    udg_tempUnit               = null
    unit                    udg_RedHero                = null
    location array          udg_AcolytePoint
    boolean array           udg_MorbenFell_Booleans
    unit                    udg_MF_Ghost               = null
    effect                  udg_AbsorbSoulSFX          = null
    unit                    udg_AbsorbSoulUnit         = null
    integer                 udg_MF_SpeedSpawn          = 0
    integer                 udg_TempInt                = 0
    real                    udg_TempReal               = 0
    timer                   udg_MFTimer                = null
    destructable            udg_MFForcewall            = null
    timerdialog             udg_MF_TimerWindow         = null
    unit                    udg_MF_AbsorbedSoul        = null
    group                   udg_tempUGroup2            = null
    group                   udg_tempUGroup             = null
    location                udg_tempPoint2             = null
    integer                 udg_testInt                = 0
    questitem array         udg_MFQuestRequirements
    quest array             udg_MFQuests
    group                   udg_MFWitheringSoulGroup   = null
    location                udg_MF_DnDPoint            = null
    real                    udg_tempNumber             = 0
    integer                 udg_tempInt                = 0
    integer                 udg_HeroExp                = 0
    boolean                 udg_ArcaneEmpower          = false
    unit                    udg_Abom                   = null
    effect array            udg_ArcaneEmp_SFX
    location                udg_BlizzardPoint          = null
    boolean                 udg_Blizzard_IsRunning     = false
    timer array             udg_Blizzard_Timer
    unit                    udg_Blizzard_Dummy         = null
    timer array             udg_UnstableMagic_Timer
    boolean                 udg_tempBool               = false
    timer                   udg_Shock_Timer            = null
    effect                  udg_Shock_SFX              = null
    timer array             udg_ArcaneBarrage_Timer
    effect                  udg_ArcaneBarrage_SFX      = null
    unit                    udg_ArcaneBarrage_Target   = null
    integer array           udg_ArcaneBarrage_Counter
    effect                  udg_ArcaneBarrage_BuffSFX  = null
    effect array            udg_IceLance_MissileSFX
    real array              udg_IceLance_MissilePos
    group                   udg_IceLance_Hits          = null
    timer array             udg_IceLance_Timer
    real                    udg_IceLance_DistTrav      = 0
    real                    udg_IceLance_Direction     = 0
    real array              udg_IceLance_Velocity
    real                    udg_tempReal               = 0
    integer                 udg_IceLance_EnemyCheckCounter = 0
    timer array             udg_ArcaneEmp_Timer
    effect array            udg_MagicWard_SFX
    timer array             udg_MagicWard_Timer
    boolean                 udg_MagicWard_Running      = false
    sound                   udg_MusicVar               = null

    // Generated
    rect                    gg_rct_Region_000          = null
    rect                    gg_rct_MorbentAttackZone   = null
    rect                    gg_rct_GhostSpawn          = null
    rect                    gg_rct_MF_Exit1            = null
    rect                    gg_rct_MF_Exit_2           = null
    rect                    gg_rct_MorbentFell_Ghost   = null
    rect                    gg_rct_MorbentFel          = null
    rect                    gg_rct_MF_Camp             = null
    rect                    gg_rct_MF_Cam_Bounds       = null
    rect                    gg_rct_MF_InvulnDestru     = null
    rect                    gg_rct_MFForceWall         = null
    rect                    gg_rct_MFGraveyard         = null
    rect                    gg_rct_Region_012          = null
    rect                    gg_rct_Earthquake_TestRegion = null
    rect                    gg_rct_Oasis               = null
    rect                    gg_rct_Region_014          = null
    rect                    gg_rct_Region_016          = null
    rect                    gg_rct_Boss_Inside_Landing_POint = null
    rect                    gg_rct_VisionZone_Hunters_Lair = null
    rect                    gg_rct_GavinRad_HeroSpawn  = null
    rect                    gg_rct_Gavinrad_VisionArea = null
    rect                    gg_rct_Gavinrad_UnitSpawn1 = null
    rect                    gg_rct_Gavinrad_UnitSpawn2 = null
    rect                    gg_rct_Gavnrad_ChargeZone  = null
    rect                    gg_rct_Gavinrad_BossSpawn  = null
    rect                    gg_rct_TM_BossSpawn        = null
    rect                    gg_rct_TM_HeroSpawn        = null
    rect                    gg_rct_TM_ArcaneBeingSpawn = null
    rect                    gg_rct_TM_VisionRect       = null
    rect                    gg_rct_TM_MagicCrystal1    = null
    rect                    gg_rct_TM_MagicCrystal3    = null
    rect                    gg_rct_TM_MagicCrystal2    = null
    rect                    gg_rct_HunterStart         = null
    rect                    gg_rct_TM_Fog_Zone         = null
    rect                    gg_rct_BossCave_Out_Zone   = null
    rect                    gg_rct_BossCave_Out_Landing = null
    rect                    gg_rct_BossCave_In_Landing = null
    rect                    gg_rct_BossCave__CamBounds = null
    rect                    gg_rct_TheVillage_Out_Zone = null
    rect                    gg_rct_TheVillage_CamBounds = null
    rect                    gg_rct_TheVillage_In_Zone  = null
    rect                    gg_rct_TM_ArcaneBeingSpawn_Copy = null
    rect                    gg_rct_TheBear_CamBounds   = null
    rect                    gg_rct_TheBear_Effect1     = null
    sound                   gg_snd_Error               = null
    sound                   gg_snd_BlizzardLoop1       = null
    sound                   gg_snd_Hint                = null
    sound                   gg_snd_QuestCompleted      = null
    sound                   gg_snd_KelThuzadDeath1     = null
    sound                   gg_snd_GoodJob             = null
    sound                   gg_snd_PursuitTheme        = null
    sound                   gg_snd_DarkAgents          = null
    sound                   gg_snd_AbominationPissed5  = null
    sound                   gg_snd_O04Mannoroth38      = null
    sound                   gg_snd_SpellStealMissile   = null
    sound                   gg_snd_IceLanceFire        = null
    sound                   gg_snd_IceLanceHit         = null
    sound                   gg_snd_SiphonManaLoop      = null
    sound                   gg_snd_ObsidianAvengerWhat2 = null
    sound                   gg_snd_QuestActivateWhat1  = null
    sound                   gg_snd_UndeadGlueScreenLoop1 = null
    sound                   gg_snd_WaterStreamLoop1    = null
    sound                   gg_snd_OrcVictory          = null
    trigger                 gg_trg_Custom_Init         = null
    trigger                 gg_trg_Custom_Init_Copy    = null
    trigger                 gg_trg_Untitled_Trigger_004 = null
    trigger                 gg_trg_Untitled_Trigger_005 = null
    trigger                 gg_trg_CSData              = null
    trigger                 gg_trg_Untitled_Trigger_006 = null
    trigger                 gg_trg_Cave_Entrance       = null
    trigger                 gg_trg_Cave_Entrance_2     = null
    trigger                 gg_trg_Untitled_Trigger_007 = null
    trigger                 gg_trg_Repeat_Music        = null
    trigger                 gg_trg_Untitled_Trigger_001 = null
    trigger                 gg_trg_Mana_Regeneration   = null
    trigger                 gg_trg_Healing_Potion_Effect = null
    trigger                 gg_trg_Buy_SPells          = null
    trigger                 gg_trg_Remove_Q_Spells     = null
    trigger                 gg_trg_Remove_E_Spells     = null
    trigger                 gg_trg_Remove_W_Spells     = null
    trigger                 gg_trg_Remove_R_Spells     = null
    trigger                 gg_trg_Untitled_Trigger_003 = null
    trigger                 gg_trg_Healing_Stone       = null
    trigger                 gg_trg_Volcano_Strike      = null
    trigger                 gg_trg_Blizzard_Start      = null
    trigger                 gg_trg_Blizzard_Stop       = null
    trigger                 gg_trg_Blizzard_Slow       = null
    trigger                 gg_trg_Arcane_Power        = null
    trigger                 gg_trg_Arcane_Emp_End      = null
    trigger                 gg_trg_Arcane_Emp_Move_Sfx = null
    trigger                 gg_trg_Arcane_Discharge    = null
    trigger                 gg_trg_Arcane_Depletion    = null
    trigger                 gg_trg_Arcane_Depletion_Copy = null
    trigger                 gg_trg_Burn                = null
    trigger                 gg_trg_Shock               = null
    trigger                 gg_trg_Shock_Destory_Effect = null
    trigger                 gg_trg_Magic_Ward_Start    = null
    trigger                 gg_trg_Untitled_Trigger_002 = null
    trigger                 gg_trg_Magic_Ward_Update   = null
    trigger                 gg_trg_Magic_Ward_Pause_Effect = null
    trigger                 gg_trg_Magic_Ward_End      = null
    trigger                 gg_trg_Magic_Ward_Delayed_SFX_Destruction = null
    trigger                 gg_trg_Ice_Lance_Start     = null
    trigger                 gg_trg_Ice_Lance_Move      = null
    trigger                 gg_trg_Ice_Lance_Damage    = null
    trigger                 gg_trg_Arcane_Barrage_Start = null
    trigger                 gg_trg_Arcane_Barrage_Buff = null
    trigger                 gg_trg_Arcane_Barrage_Fall = null
    trigger                 gg_trg_Arcane_Barrage_Damage = null
    trigger                 gg_trg_Arcane_Barrage_End  = null
    trigger                 gg_trg_Unstable_Magic_Start = null
    trigger                 gg_trg_Unstable_Magic_Stop = null
    trigger                 gg_trg_Event_Init          = null
    trigger                 gg_trg_Morbent_Init_Trigger = null
    trigger                 gg_trg_Time_runs_out       = null
    trigger                 gg_trg_Acolyte_Animation   = null
    trigger                 gg_trg_Ghoul_Spawn         = null
    trigger                 gg_trg_Plague_Zombie_Spawn = null
    trigger                 gg_trg_Skeletal_Mages      = null
    trigger                 gg_trg_Skeleton_Spawns     = null
    trigger                 gg_trg_Zone_Exit           = null
    trigger                 gg_trg_MF_Phase_2_Init     = null
    trigger                 gg_trg_Necromancer_Death   = null
    trigger                 gg_trg_Cauldron_Dies       = null
    trigger                 gg_trg_Morbent_Eighty_Percent = null
    trigger                 gg_trg_Acolyte_Dies        = null
    trigger                 gg_trg_Acolyte_Animation_reset = null
    trigger                 gg_trg_Death_and_Decay     = null
    trigger                 gg_trg_Death_Coil          = null
    trigger                 gg_trg_Morbent_Dies        = null
    trigger                 gg_trg_Soul_Barrage        = null
    trigger                 gg_trg_Spawn_Soul          = null
    trigger                 gg_trg_Absorb_Soul         = null
    trigger                 gg_trg_Absorb_Soul_Dies    = null
    trigger                 gg_trg_MF_Dies             = null
    trigger                 gg_trg_MF_Create_Achievements = null
    trigger                 gg_trg_Lightning_Enhancement_Effect = null
    trigger                 gg_trg_Earthquake_Damage   = null
    trigger                 gg_trg_Earthquake_Damage_Copy_2 = null
    trigger                 gg_trg_Earthquake_Damage_Copy = null
    trigger                 gg_trg_Earthquake          = null
    trigger                 gg_trg_Struct_Test         = null
    trigger                 gg_trg_Periodic_Timer_Test = null
    trigger                 gg_trg_xebasic             = null
    trigger                 gg_trg_xedamage            = null
    unit                    gg_unit_n002_0030          = null
    unit                    gg_unit_n002_0031          = null
    unit                    gg_unit_n002_0039          = null
    unit                    gg_unit_u004_0029          = null
    unit                    gg_unit_h007_0021          = null
    unit                    gg_unit_u000_0020          = null
    unit                    gg_unit_u006_0040          = null
    unit                    gg_unit_u006_0035          = null
    destructable            gg_dest_Dofw_0033          = null
    destructable            gg_dest_DTc2_2577          = null
endglobals

function InitGlobals takes nothing returns nothing
    local integer i = 0
    set i = 0
    loop
        exitwhen (i > 10)
        set udg_MorbenFell_Booleans[i] = false
        set i = i + 1
    endloop

    set udg_MF_SpeedSpawn = 0
    set udg_TempInt = 0
    set udg_TempReal = 0
    set udg_MFTimer = CreateTimer()
    set udg_tempUGroup2 = CreateGroup()
    set udg_tempUGroup = CreateGroup()
    set udg_testInt = 0
    set udg_MFWitheringSoulGroup = CreateGroup()
    set udg_tempNumber = 0
    set udg_tempInt = 0
    set udg_HeroExp = 0
    set udg_ArcaneEmpower = false
    set udg_Blizzard_IsRunning = false
    set i = 0
    loop
        exitwhen (i > 2)
        set udg_Blizzard_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 1)
        set udg_UnstableMagic_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set udg_tempBool = false
    set udg_Shock_Timer = CreateTimer()
    set i = 0
    loop
        exitwhen (i > 4)
        set udg_ArcaneBarrage_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 2)
        set udg_ArcaneBarrage_Counter[i] = 0
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 3)
        set udg_IceLance_MissilePos[i] = 0
        set i = i + 1
    endloop

    set udg_IceLance_Hits = CreateGroup()
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_IceLance_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set udg_IceLance_DistTrav = 0
    set udg_IceLance_Direction = 0
    set i = 0
    loop
        exitwhen (i > 2)
        set udg_IceLance_Velocity[i] = 0
        set i = i + 1
    endloop

    set udg_tempReal = 0
    set udg_IceLance_EnemyCheckCounter = 0
    set i = 0
    loop
        exitwhen (i > 2)
        set udg_ArcaneEmp_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 4)
        set udg_MagicWard_Timer[i] = CreateTimer()
        set i = i + 1
    endloop

    set udg_MagicWard_Running = false
endfunction

//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_Error = CreateSound( "Sound\\Interface\\Error.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_Error, "InterfaceError" )
    call SetSoundDuration( gg_snd_Error, 614 )
    set gg_snd_BlizzardLoop1 = CreateSound( "Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_BlizzardLoop1, "BlizzardLoop" )
    call SetSoundDuration( gg_snd_BlizzardLoop1, 4000 )
    set gg_snd_Hint = CreateSound( "Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_Hint, "Hint" )
    call SetSoundDuration( gg_snd_Hint, 2006 )
    set gg_snd_QuestCompleted = CreateSound( "Sound\\Interface\\QuestCompleted.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_QuestCompleted, "QuestCompleted" )
    call SetSoundDuration( gg_snd_QuestCompleted, 5155 )
    set gg_snd_KelThuzadDeath1 = CreateSound( "Sound\\Dialogue\\Extra\\KelThuzadDeath1.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_KelThuzadDeath1, "KelThuzadDeath1" )
    call SetSoundDuration( gg_snd_KelThuzadDeath1, 4388 )
    set gg_snd_GoodJob = CreateSound( "Sound\\Interface\\GoodJob.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_GoodJob, "GoodJob" )
    call SetSoundDuration( gg_snd_GoodJob, 2548 )
    set gg_snd_PursuitTheme = CreateSound( "Sound\\Music\\mp3Music\\PursuitTheme.mp3", true, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundDuration( gg_snd_PursuitTheme, 82537 )
    call SetSoundChannel( gg_snd_PursuitTheme, 7 )
    call SetSoundVolume( gg_snd_PursuitTheme, 127 )
    call SetSoundPitch( gg_snd_PursuitTheme, 1.0 )
    set gg_snd_DarkAgents = CreateSound( "Sound\\Music\\mp3Music\\DarkAgents.mp3", true, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundDuration( gg_snd_DarkAgents, 64950 )
    call SetSoundChannel( gg_snd_DarkAgents, 7 )
    call SetSoundVolume( gg_snd_DarkAgents, 127 )
    call SetSoundPitch( gg_snd_DarkAgents, 1.0 )
    set gg_snd_AbominationPissed5 = CreateSound( "Units\\Undead\\Abomination\\AbominationPissed5.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_AbominationPissed5, "AbominationPissed" )
    call SetSoundDuration( gg_snd_AbominationPissed5, 1735 )
    set gg_snd_O04Mannoroth38 = CreateSound( "Sound\\Dialogue\\OrcCampaign\\Orc04Interlude\\O04Mannoroth38.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_O04Mannoroth38, "O04Mannoroth38" )
    call SetSoundDuration( gg_snd_O04Mannoroth38, 12617 )
    set gg_snd_SpellStealMissile = CreateSound( "Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_SpellStealMissile, "SpellStealMissileLaunch" )
    call SetSoundDuration( gg_snd_SpellStealMissile, 1541 )
    set gg_snd_IceLanceFire = CreateSound( "Abilities\\Spells\\Other\\FrostBolt\\FrostBoltHit1.wav", false, true, true, 10, 10, "MissilesEAX" )
    call SetSoundParamsFromLabel( gg_snd_IceLanceFire, "FrostBoltHit" )
    call SetSoundDuration( gg_snd_IceLanceFire, 1347 )
    set gg_snd_IceLanceHit = CreateSound( "Abilities\\Spells\\Other\\FrostArrows\\FrostArrowHit1.wav", false, true, true, 10, 10, "MissilesEAX" )
    call SetSoundParamsFromLabel( gg_snd_IceLanceHit, "FrostArrowHit" )
    call SetSoundDuration( gg_snd_IceLanceHit, 1115 )
    set gg_snd_SiphonManaLoop = CreateSound( "Abilities\\Spells\\Other\\Drain\\SiphonManaLoop.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_SiphonManaLoop, "SiphonManaLoop" )
    call SetSoundDuration( gg_snd_SiphonManaLoop, 1588 )
    set gg_snd_ObsidianAvengerWhat2 = CreateSound( "Units\\Undead\\ObsidianStatue\\ObsidianAvengerWhat2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_ObsidianAvengerWhat2, "ObsidianDestroyerWhat" )
    call SetSoundDuration( gg_snd_ObsidianAvengerWhat2, 2647 )
    set gg_snd_QuestActivateWhat1 = CreateSound( "Sound\\Interface\\QuestActivateWhat1.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_QuestActivateWhat1, "QuestLogModified" )
    call SetSoundDuration( gg_snd_QuestActivateWhat1, 539 )
    set gg_snd_UndeadGlueScreenLoop1 = CreateSound( "Sound\\Ambient\\UndeadGlueScreenLoop1.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_UndeadGlueScreenLoop1, "UndeadGlueScreenLoop" )
    call SetSoundDuration( gg_snd_UndeadGlueScreenLoop1, 7291 )
    set gg_snd_WaterStreamLoop1 = CreateSound( "Sound\\Ambient\\DoodadEffects\\WaterStreamLoop1.wav", false, true, true, 10, 10, "DoodadsEAX" )
    call SetSoundParamsFromLabel( gg_snd_WaterStreamLoop1, "StreamLoop" )
    call SetSoundDuration( gg_snd_WaterStreamLoop1, 2009 )
    set gg_snd_OrcVictory = CreateSound( "Sound\\Music\\mp3Music\\OrcVictory.mp3", false, false, false, 10, 10, "" )
    call SetSoundDuration( gg_snd_OrcVictory, 44496 )
    call SetSoundChannel( gg_snd_OrcVictory, 0 )
    call SetSoundVolume( gg_snd_OrcVictory, 127 )
    call SetSoundPitch( gg_snd_OrcVictory, 1.0 )
endfunction

//***************************************************************************
//*
//*  Destructable Objects
//*
//***************************************************************************

function CreateAllDestructables takes nothing returns nothing
    local destructable d
    local trigger t
    local real life
    set gg_dest_DTc2_2577 = CreateDestructable( 'DTc2', 13568.0, 14432.0, 270.000, 1.000, 0 )
    set gg_dest_Dofw_0033 = CreateDestructable( 'Dofw', -13632.0, 11968.0, 270.000, 1.000, 0 )
endfunction

//***************************************************************************
//*
//*  Items
//*
//***************************************************************************

function CreateAllItems takes nothing returns nothing
    local integer itemID

    call CreateItem( 'I001', -1686.3, -784.6 )
    call CreateItem( 'I001', -2274.2, -363.8 )
    call CreateItem( 'I008', -2153.0, -653.7 )
    call CreateItem( 'I008', -2289.9, -640.6 )
    call CreateItem( 'I008', -2297.1, -716.6 )
    call CreateItem( 'I008', -2216.3, -719.3 )
    call CreateItem( 'I008', -2132.3, -424.7 )
    call CreateItem( 'I008', -2227.5, -656.1 )
    call CreateItem( 'I009', -2190.8, -424.7 )
    call CreateItem( 'I009', -1672.8, -885.7 )
    call CreateItem( 'I00A', -2142.6, -363.8 )
    call CreateItem( 'I00B', -1793.6, -709.6 )
    call CreateItem( 'I00B', -2281.6, -415.3 )
    call CreateItem( 'I00C', -2193.1, -376.9 )
    call CreateItem( 'ofro', -1792.3, -1069.5 )
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateBuildingsForPlayer0 takes nothing returns nothing
    local player p = Player(0)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'h002', -13184.0, 6464.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(9) )
    set u = CreateUnit( p, 'h002', -14080.0, 6464.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(9) )
    set u = CreateUnit( p, 'nitb', -7872.0, 6592.0, 270.000 )
    set u = CreateUnit( p, 'nitb', -7552.0, 6592.0, 270.000 )
    set u = CreateUnit( p, 'nitb', -7232.0, 6656.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer0 takes nothing returns nothing
    local player p = Player(0)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'n00H', -13941.3, -13979.3, 228.220 )
    call SetUnitColor( u, ConvertPlayerColor(20) )
    set u = CreateUnit( p, 'n00E', -4463.4, -747.2, 224.611 )
    call SetUnitColor( u, ConvertPlayerColor(20) )
    set u = CreateUnit( p, 'n00F', -362.8, 820.3, 275.854 )
    set u = CreateUnit( p, 'n00E', 11326.3, 13699.4, 121.151 )
    call SetUnitColor( u, ConvertPlayerColor(20) )
endfunction

//===========================================================================
function CreateUnitsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_h007_0021 = CreateUnit( p, 'h007', -13875.5, 5520.3, 294.710 )
    set u = CreateUnit( p, 'h006', -13935.9, 6238.2, 90.453 )
    set u = CreateUnit( p, 'h006', -13367.9, 6225.9, 109.675 )
    set u = CreateUnit( p, 'h006', -13446.7, 6172.3, 106.883 )
    set u = CreateUnit( p, 'h006', -13814.9, 6183.7, 83.563 )
    set u = CreateUnit( p, 'hfoo', -13430.0, 5307.2, 201.297 )
    set u = CreateUnit( p, 'hfoo', -13261.9, 5833.5, 175.000 )
    set u = CreateUnit( p, 'hmpr', -13309.4, 6076.3, 150.230 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer11 takes nothing returns nothing
    local player p = Player(11)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_u004_0029 = CreateUnit( p, 'u004', -13632.0, 13632.0, 270.000 )
    call SetUnitColor( gg_unit_u004_0029, ConvertPlayerColor(10) )
endfunction

//===========================================================================
function CreateUnitsForPlayer11 takes nothing returns nothing
    local player p = Player(11)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_u000_0020 = CreateUnit( p, 'u000', -13629.7, 14181.5, 274.133 )
    call SetUnitColor( gg_unit_u000_0020, ConvertPlayerColor(12) )
    set gg_unit_n002_0030 = CreateUnit( p, 'n002', -14135.2, 13647.9, 355.880 )
    call SetUnitColor( gg_unit_n002_0030, ConvertPlayerColor(3) )
    set gg_unit_n002_0031 = CreateUnit( p, 'n002', -13624.3, 13057.5, 93.120 )
    call SetUnitColor( gg_unit_n002_0031, ConvertPlayerColor(3) )
    set gg_unit_u006_0035 = CreateUnit( p, 'u006', -13970.6, 11632.1, 278.846 )
    call SetUnitColor( gg_unit_u006_0035, ConvertPlayerColor(10) )
    set gg_unit_n002_0039 = CreateUnit( p, 'n002', -13103.7, 13652.9, 178.883 )
    call SetUnitColor( gg_unit_n002_0039, ConvertPlayerColor(3) )
    set gg_unit_u006_0040 = CreateUnit( p, 'u006', -13325.1, 11633.6, 260.406 )
    call SetUnitColor( gg_unit_u006_0040, ConvertPlayerColor(10) )
    set u = CreateUnit( p, 'o000', -13586.2, 1161.3, 3.439 )
endfunction

//===========================================================================
function CreateNeutralHostile takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'o000', -7463.7, -646.8, 22.204 )
    set u = CreateUnit( p, 'o000', -7340.0, -682.3, 22.204 )
    set u = CreateUnit( p, 'o000', -7302.1, -824.3, 22.204 )
    set u = CreateUnit( p, 'o000', -14660.9, -15107.1, 187.015 )
    set u = CreateUnit( p, 'o000', -7447.7, -778.9, 22.204 )
    set u = CreateUnit( p, 'nban', -8719.4, 9699.1, 210.395 )
    set u = CreateUnit( p, 'o000', -14960.9, -15077.5, 315.614 )
    set u = CreateUnit( p, 'o000', -15065.0, -15212.8, 237.905 )
    set u = CreateUnit( p, 'o000', -14962.8, -15436.3, 45.946 )
    set u = CreateUnit( p, 'o000', -14747.8, -15529.2, 15.162 )
    set u = CreateUnit( p, 'o000', -14552.3, -15447.4, 167.085 )
    set u = CreateUnit( p, 'o000', -14518.1, -15364.3, 288.235 )
    set u = CreateUnit( p, 'o000', -14623.2, -15211.4, 30.719 )
    set u = CreateUnit( p, 'o000', -14784.8, -15255.3, 339.136 )
    set u = CreateUnit( p, 'o000', -14820.0, -15327.6, 299.529 )
    set u = CreateUnit( p, 'nbrg', -8738.5, 9601.5, 354.584 )
    set u = CreateUnit( p, 'o000', -14825.9, -15414.0, 73.545 )
    set u = CreateUnit( p, 'o000', -14833.1, -15509.5, 144.112 )
    set u = CreateUnit( p, 'o000', -14873.3, -15595.3, 239.399 )
    set u = CreateUnit( p, 'o000', -14908.6, -15617.0, 206.626 )
    set u = CreateUnit( p, 'o000', -14955.6, -15471.6, 134.444 )
    set u = CreateUnit( p, 'o000', -14987.7, -15324.9, 1.318 )
    set u = CreateUnit( p, 'o000', -14994.4, -15249.7, 190.102 )
    set u = CreateUnit( p, 'o000', -14933.0, -15157.1, 120.645 )
    set u = CreateUnit( p, 'o000', -14886.1, -15133.1, 11.657 )
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'n00A', -8192.0, -416.0, 68.528 )
    call SetUnitColor( u, ConvertPlayerColor(24) )
    set u = CreateUnit( p, 'n008', -7200.0, -288.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(24) )
    set u = CreateUnit( p, 'n009', -7680.0, -704.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(24) )
    set u = CreateUnit( p, 'n007', -1632.0, -288.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(10) )
    set u = CreateUnit( p, 'n000', -2048.0, -64.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(3) )
    set u = CreateUnit( p, 'u00E', -11072.0, 3712.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(0) )
    set u = CreateUnit( p, 'u00E', -11264.0, 5248.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(0) )
    set u = CreateUnit( p, 'u00E', -9984.0, 4288.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(0) )
    set u = CreateUnit( p, 'u00E', -11520.0, 5184.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(0) )
    set u = CreateUnit( p, 'u00E', -10304.0, 5312.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(0) )
    set u = CreateUnit( p, 'ncop', 11968.0, 14656.0, 270.000 )
    set u = CreateUnit( p, 'ncop', 11264.0, 13888.0, 270.000 )
    set u = CreateUnit( p, 'ncop', 11008.0, 14400.0, 270.000 )
    set u = CreateUnit( p, 'ncop', -7040.0, -640.0, 270.000 )
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'n00B', -7902.3, 198.8, 225.851 )
    call SetUnitColor( u, ConvertPlayerColor(21) )
    set u = CreateUnit( p, 'n00C', -7270.7, 290.0, 247.189 )
    set u = CreateUnit( p, 'n00C', -7366.7, 221.7, 227.017 )
    set u = CreateUnit( p, 'n00D', -8868.5, -1202.4, 313.070 )
    call SetUnitColor( u, ConvertPlayerColor(21) )
    set u = CreateUnit( p, 'nplg', 10847.2, 14616.1, 310.858 )
    set u = CreateUnit( p, 'n00G', -8320.4, 14184.2, 220.490 )
    call SetUnitColor( u, ConvertPlayerColor(20) )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer0(  )
    call CreateBuildingsForPlayer11(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer0(  )
    call CreateUnitsForPlayer1(  )
    call CreateUnitsForPlayer11(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings(  )
    call CreatePlayerBuildings(  )
    call CreateNeutralHostile(  )
    call CreateNeutralPassive(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_Region_000 = Rect( -15136.0, 13376.0, -15040.0, 13472.0 )
    set gg_rct_MorbentAttackZone = Rect( -13920.0, 5184.0, -13472.0, 5472.0 )
    set gg_rct_GhostSpawn = Rect( -14368.0, 12896.0, -12928.0, 14336.0 )
    set gg_rct_MF_Exit1 = Rect( -13984.0, 12032.0, -13312.0, 12192.0 )
    set gg_rct_MF_Exit_2 = Rect( -13824.0, 11712.0, -13504.0, 11840.0 )
    set gg_rct_MorbentFell_Ghost = Rect( -13696.0, 13568.0, -13536.0, 13696.0 )
    set gg_rct_MorbentFel = Rect( -14784.0, 12384.0, -12448.0, 14752.0 )
    set we = AddWeatherEffect( gg_rct_MorbentFel, 'FDgl' )
    call EnableWeatherEffect( we, true )
    set gg_rct_MF_Camp = Rect( -14208.0, 5248.0, -13152.0, 6336.0 )
    set we = AddWeatherEffect( gg_rct_MF_Camp, 'LRma' )
    call EnableWeatherEffect( we, true )
    set gg_rct_MF_Cam_Bounds = Rect( -14336.0, 5152.0, -13056.0, 12192.0 )
    set gg_rct_MF_InvulnDestru = Rect( -14464.0, 4928.0, -12992.0, 6688.0 )
    set gg_rct_MFForceWall = Rect( -13696.0, 12128.0, -13568.0, 12224.0 )
    set gg_rct_MFGraveyard = Rect( -15648.0, 13344.0, -14688.0, 14080.0 )
    set gg_rct_Region_012 = Rect( -13856.0, 12224.0, -13408.0, 12384.0 )
    set gg_rct_Earthquake_TestRegion = Rect( -15072.0, 928.0, -13856.0, 2048.0 )
    set gg_rct_Oasis = Rect( -3072.0, -1952.0, 96.0, 704.0 )
    set gg_rct_Region_014 = Rect( -9344.0, -800.0, -6496.0, 960.0 )
    set we = AddWeatherEffect( gg_rct_Region_014, 'FDbh' )
    call EnableWeatherEffect( we, true )
    set gg_rct_Region_016 = Rect( -9664.0, -1184.0, -6432.0, 960.0 )
    set we = AddWeatherEffect( gg_rct_Region_016, 'FDbh' )
    call EnableWeatherEffect( we, true )
    call SetSoundPosition( gg_snd_WaterStreamLoop1, -8048.0, -112.0, 309.4 )
    call RegisterStackedSound( gg_snd_WaterStreamLoop1, true, 3232.0, 2144.0 )
    set gg_rct_Boss_Inside_Landing_POint = Rect( 384.0, 320.0, 480.0, 384.0 )
    set gg_rct_VisionZone_Hunters_Lair = Rect( -8672.0, -1024.0, -7264.0, 672.0 )
    set gg_rct_GavinRad_HeroSpawn = Rect( -6016.0, 3680.0, -5760.0, 3968.0 )
    set gg_rct_Gavinrad_VisionArea = Rect( -6976.0, 3328.0, -4800.0, 5568.0 )
    set gg_rct_Gavinrad_UnitSpawn1 = Rect( -4928.0, 4352.0, -4768.0, 4544.0 )
    set gg_rct_Gavinrad_UnitSpawn2 = Rect( -7008.0, 4384.0, -6848.0, 4544.0 )
    set gg_rct_Gavnrad_ChargeZone = Rect( -6912.0, 3488.0, -4864.0, 5472.0 )
    set gg_rct_Gavinrad_BossSpawn = Rect( -5920.0, 5088.0, -5856.0, 5152.0 )
    set gg_rct_TM_BossSpawn = Rect( -10816.0, 4384.0, -10688.0, 4512.0 )
    set gg_rct_TM_HeroSpawn = Rect( -10688.0, 3840.0, -10624.0, 3904.0 )
    set gg_rct_TM_ArcaneBeingSpawn = Rect( -11488.0, 3808.0, -9984.0, 5248.0 )
    set gg_rct_TM_VisionRect = Rect( -11040.0, 3840.0, -9984.0, 5248.0 )
    set gg_rct_TM_MagicCrystal1 = Rect( -10496.0, 4608.0, -10432.0, 4672.0 )
    set gg_rct_TM_MagicCrystal3 = Rect( -10816.0, 4736.0, -10688.0, 4800.0 )
    set gg_rct_TM_MagicCrystal2 = Rect( -11072.0, 4544.0, -11008.0, 4576.0 )
    set gg_rct_HunterStart = Rect( -7840.0, 96.0, -7776.0, 160.0 )
    set gg_rct_TM_Fog_Zone = Rect( -12256.0, 2848.0, -8992.0, 6400.0 )
    set we = AddWeatherEffect( gg_rct_TM_Fog_Zone, 'FDbh' )
    call EnableWeatherEffect( we, true )
    set gg_rct_BossCave_Out_Zone = Rect( 13952.0, 14496.0, 14240.0, 14720.0 )
    set gg_rct_BossCave_Out_Landing = Rect( -8288.0, 64.0, -8192.0, 160.0 )
    set gg_rct_BossCave_In_Landing = Rect( 14048.0, 14400.0, 14144.0, 14496.0 )
    set gg_rct_BossCave__CamBounds = Rect( 13760.0, 13536.0, 14304.0, 14176.0 )
    set gg_rct_TheVillage_Out_Zone = Rect( 11552.0, 14496.0, 11808.0, 14720.0 )
    set gg_rct_TheVillage_CamBounds = Rect( 10944.0, 14048.0, 11456.0, 14400.0 )
    set gg_rct_TheVillage_In_Zone = Rect( 13408.0, 14464.0, 13664.0, 14592.0 )
    set gg_rct_TM_ArcaneBeingSpawn_Copy = Rect( -10784.0, 12576.0, -9024.0, 14240.0 )
    set gg_rct_TheBear_CamBounds = Rect( -10208.0, 12832.0, -9216.0, 14304.0 )
    set gg_rct_TheBear_Effect1 = Rect( -11488.0, 11968.0, -8096.0, 14592.0 )
    set we = AddWeatherEffect( gg_rct_TheBear_Effect1, 'FDwl' )
    call EnableWeatherEffect( we, true )
endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Custom Init
//===========================================================================
function Trig_Custom_Init_Actions takes nothing returns nothing
    call SetCameraFieldForPlayer( Player(0), CAMERA_FIELD_TARGET_DISTANCE, 2000.00, 0 )
    call ModifyGateBJ( bj_GATEOPERATION_OPEN, gg_dest_DTc2_2577 )
endfunction

//===========================================================================
function InitTrig_Custom_Init takes nothing returns nothing
    set gg_trg_Custom_Init = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Custom_Init, function Trig_Custom_Init_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 005
//===========================================================================
function Trig_Untitled_Trigger_005_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_005 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_005 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Untitled_Trigger_005, function Trig_Untitled_Trigger_005_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 006
//===========================================================================
function Trig_Untitled_Trigger_006_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_006 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_006 = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Untitled_Trigger_006, GetCurrentCameraBoundsMapRectBJ() )
    call TriggerAddAction( gg_trg_Untitled_Trigger_006, function Trig_Untitled_Trigger_006_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 007
//===========================================================================
function Trig_Untitled_Trigger_007_Actions takes nothing returns nothing
    call SetTimeOfDayScalePercentBJ( 0.00 )
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_007 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_007 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Untitled_Trigger_007, function Trig_Untitled_Trigger_007_Actions )
endfunction

//===========================================================================
// Trigger: Repeat Music
//===========================================================================
function Trig_Repeat_Music_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Repeat_Music takes nothing returns nothing
    set gg_trg_Repeat_Music = CreateTrigger(  )
    call TriggerRegisterTimerEventSingle( gg_trg_Repeat_Music, GetSoundFileDurationBJ("music") )
    call TriggerAddAction( gg_trg_Repeat_Music, function Trig_Repeat_Music_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 001
//===========================================================================
function Trig_Untitled_Trigger_001_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_001 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_001 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Untitled_Trigger_001, function Trig_Untitled_Trigger_001_Actions )
endfunction

//===========================================================================
// Trigger: Mana Regeneration
//===========================================================================
function Trig_Mana_Regeneration_Func003Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(udg_RedHero, udg_TempInt)) == 'I008' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Mana_Regeneration_Func003Func002C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(udg_RedHero, udg_TempInt)) == 'I00B' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Mana_Regeneration_Actions takes nothing returns nothing
    set udg_TempInt = 1
    set udg_TempReal = 0.00
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = UnitInventoryCount(udg_RedHero)
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Mana_Regeneration_Func003Func001C() ) then
            set udg_TempReal = ( udg_TempReal + 4.00 )
        else
        endif
        if ( Trig_Mana_Regeneration_Func003Func002C() ) then
            set udg_TempReal = ( udg_TempReal + 3.00 )
        else
        endif
        set udg_TempInt = ( udg_TempInt + 1 )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    call SetUnitManaBJ( udg_RedHero, ( GetUnitStateSwap(UNIT_STATE_MANA, udg_RedHero) + ( udg_TempReal / 5.00 ) ) )
endfunction

//===========================================================================
function InitTrig_Mana_Regeneration takes nothing returns nothing
    set gg_trg_Mana_Regeneration = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Mana_Regeneration, 0.20 )
    call TriggerAddAction( gg_trg_Mana_Regeneration, function Trig_Mana_Regeneration_Actions )
endfunction

//===========================================================================
// Trigger: Healing Potion Effect
//===========================================================================
function Trig_Healing_Potion_Effect_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Healing_Potion_Effect_Actions takes nothing returns nothing
    call SetUnitLifeBJ( GetManipulatingUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetManipulatingUnit()) + ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetManipulatingUnit()) * 0.25 ) ) )
endfunction

//===========================================================================
function InitTrig_Healing_Potion_Effect takes nothing returns nothing
    set gg_trg_Healing_Potion_Effect = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Healing_Potion_Effect, EVENT_PLAYER_UNIT_USE_ITEM )
    call TriggerAddCondition( gg_trg_Healing_Potion_Effect, Condition( function Trig_Healing_Potion_Effect_Conditions ) )
    call TriggerAddAction( gg_trg_Healing_Potion_Effect, function Trig_Healing_Potion_Effect_Actions )
endfunction

//===========================================================================
// Trigger: Buy SPells
//===========================================================================
function Trig_Buy_SPells_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetSellingUnit()) == 'n00A' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func002C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func003C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func004C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00F' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func005C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00G' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func006C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00K' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func007C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00L' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func008C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00M' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func009C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I00P' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Func010C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetSoldItem()) == 'I000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Buy_SPells_Actions takes nothing returns nothing
    if ( Trig_Buy_SPells_Func001C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_Q_Spells )
        call UnitAddAbilityBJ( 'A00E', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func002C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_Q_Spells )
        call UnitAddAbilityBJ( 'A000', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func003C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_Q_Spells )
        call UnitAddAbilityBJ( 'A01O', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func004C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_E_Spells )
        call UnitAddAbilityBJ( 'A01Q', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func005C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_E_Spells )
        call UnitAddAbilityBJ( 'A01R', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func006C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_E_Spells )
        call UnitAddAbilityBJ( 'A01S', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func007C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_W_Spells )
        call UnitAddAbilityBJ( 'A01T', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func008C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_W_Spells )
        call UnitAddAbilityBJ( 'A00F', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func009C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_R_Spells )
        call UnitAddAbilityBJ( 'A01Y', udg_RedHero )
    else
    endif
    if ( Trig_Buy_SPells_Func010C() ) then
        call ConditionalTriggerExecute( gg_trg_Remove_R_Spells )
        call UnitAddAbilityBJ( 'A00K', udg_RedHero )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Buy_SPells takes nothing returns nothing
    set gg_trg_Buy_SPells = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Buy_SPells, EVENT_PLAYER_UNIT_SELL_ITEM )
    call TriggerAddCondition( gg_trg_Buy_SPells, Condition( function Trig_Buy_SPells_Conditions ) )
    call TriggerAddAction( gg_trg_Buy_SPells, function Trig_Buy_SPells_Actions )
endfunction

//===========================================================================
// Trigger: Remove Q Spells
//===========================================================================
function Trig_Remove_Q_Spells_Actions takes nothing returns nothing
    call UnitRemoveAbilityBJ( 'A01O', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A000', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A00E', udg_RedHero )
endfunction

//===========================================================================
function InitTrig_Remove_Q_Spells takes nothing returns nothing
    set gg_trg_Remove_Q_Spells = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Remove_Q_Spells, function Trig_Remove_Q_Spells_Actions )
endfunction

//===========================================================================
// Trigger: Remove E Spells
//===========================================================================
function Trig_Remove_E_Spells_Actions takes nothing returns nothing
    call UnitRemoveAbilityBJ( 'A01Q', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A01R', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A01S', udg_RedHero )
endfunction

//===========================================================================
function InitTrig_Remove_E_Spells takes nothing returns nothing
    set gg_trg_Remove_E_Spells = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Remove_E_Spells, function Trig_Remove_E_Spells_Actions )
endfunction

//===========================================================================
// Trigger: Remove W Spells
//===========================================================================
function Trig_Remove_W_Spells_Actions takes nothing returns nothing
    call UnitRemoveAbilityBJ( 'A01T', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A00F', udg_RedHero )
endfunction

//===========================================================================
function InitTrig_Remove_W_Spells takes nothing returns nothing
    set gg_trg_Remove_W_Spells = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Remove_W_Spells, function Trig_Remove_W_Spells_Actions )
endfunction

//===========================================================================
// Trigger: Remove R Spells
//===========================================================================
function Trig_Remove_R_Spells_Actions takes nothing returns nothing
    call UnitRemoveAbilityBJ( 'A01Y', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A00K', udg_RedHero )
endfunction

//===========================================================================
function InitTrig_Remove_R_Spells takes nothing returns nothing
    set gg_trg_Remove_R_Spells = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Remove_R_Spells, function Trig_Remove_R_Spells_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 003
//===========================================================================
function Trig_Untitled_Trigger_003_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_003 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_003 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Untitled_Trigger_003, function Trig_Untitled_Trigger_003_Actions )
endfunction

//===========================================================================
// Trigger: Healing Stone
//===========================================================================
function Trig_Healing_Stone_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01H' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Healing_Stone_Actions takes nothing returns nothing
    call SetUnitLifeBJ( GetSpellAbilityUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetSpellAbilityUnit()) + ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetSpellAbilityUnit()) * 0.25 ) ) )
endfunction

//===========================================================================
function InitTrig_Healing_Stone takes nothing returns nothing
    set gg_trg_Healing_Stone = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Healing_Stone, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Healing_Stone, Condition( function Trig_Healing_Stone_Conditions ) )
    call TriggerAddAction( gg_trg_Healing_Stone, function Trig_Healing_Stone_Actions )
endfunction

//===========================================================================
// Trigger: Volcano Strike
//===========================================================================
function Trig_Volcano_Strike_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00L' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Volcano_Strike_Func003001003 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetSpellAbilityUnit())) == true )
endfunction

function Trig_Volcano_Strike_Func003A takes nothing returns nothing
    call UnitDamageTargetBJ( GetSpellAbilityUnit(), GetEnumUnit(), 100.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC )
    call AddSpecialEffectTargetUnitBJ( "chest", GetEnumUnit(), "Objects\\Spawnmodels\\Human\\FragmentationShards\\FragBoomSpawn.mdl" )
endfunction

function Trig_Volcano_Strike_Actions takes nothing returns nothing
    call AddSpecialEffectLocBJ( GetSpellTargetLoc(), "Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl" )
    call AddSpecialEffectLocBJ( GetSpellTargetLoc(), "Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl" )
    call ForGroupBJ( GetUnitsInRangeOfLocMatching(225.00, GetSpellTargetLoc(), Condition(function Trig_Volcano_Strike_Func003001003)), function Trig_Volcano_Strike_Func003A )
endfunction

//===========================================================================
function InitTrig_Volcano_Strike takes nothing returns nothing
    set gg_trg_Volcano_Strike = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Volcano_Strike, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Volcano_Strike, Condition( function Trig_Volcano_Strike_Conditions ) )
    call TriggerAddAction( gg_trg_Volcano_Strike, function Trig_Volcano_Strike_Actions )
endfunction

//===========================================================================
// Trigger: Blizzard Start
//===========================================================================
function Trig_Blizzard_Start_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Blizzard_Start_Actions takes nothing returns nothing
    call TriggerExecute( gg_trg_Blizzard_Stop )
    set udg_BlizzardPoint = GetSpellTargetLoc()
    set udg_Blizzard_IsRunning = true
    call CreateNUnitsAtLoc( 1, 'h004', Player(0), udg_BlizzardPoint, bj_UNIT_FACING )
    set udg_Blizzard_Dummy = GetLastCreatedUnit()
    call UnitAddAbilityBJ( 'A00Q', GetLastCreatedUnit() )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "blizzard", udg_BlizzardPoint )
    call UnitApplyTimedLifeBJ( 10.00, 'BTLF', GetLastCreatedUnit() )
    call TriggerSleepAction( 0.70 )
    call TriggerExecute( gg_trg_Blizzard_Slow )
    call StartTimerBJ( udg_Blizzard_Timer[0], true, 1.00 )
    call StartTimerBJ( udg_Blizzard_Timer[1], false, 8.50 )
endfunction

//===========================================================================
function InitTrig_Blizzard_Start takes nothing returns nothing
    set gg_trg_Blizzard_Start = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Blizzard_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Blizzard_Start, Condition( function Trig_Blizzard_Start_Conditions ) )
    call TriggerAddAction( gg_trg_Blizzard_Start, function Trig_Blizzard_Start_Actions )
endfunction

//===========================================================================
// Trigger: Blizzard Stop
//===========================================================================
function Trig_Blizzard_Stop_Actions takes nothing returns nothing
    call PauseTimerBJ( true, udg_Blizzard_Timer[0] )
    call PauseTimerBJ( true, udg_Blizzard_Timer[1] )
    set udg_Blizzard_IsRunning = false
    call RemoveUnit( udg_Blizzard_Dummy )
    call RemoveLocation (udg_BlizzardPoint)
endfunction

//===========================================================================
function InitTrig_Blizzard_Stop takes nothing returns nothing
    set gg_trg_Blizzard_Stop = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Blizzard_Stop, udg_Blizzard_Timer[1] )
    call TriggerAddAction( gg_trg_Blizzard_Stop, function Trig_Blizzard_Stop_Actions )
endfunction

//===========================================================================
// Trigger: Blizzard Slow
//===========================================================================
function Trig_Blizzard_Slow_Func001Func001002003001001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Blizzard_Slow_Func001Func001002003001002 takes nothing returns boolean
    return ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_ANCIENT) == false )
endfunction

function Trig_Blizzard_Slow_Func001Func001002003001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Blizzard_Slow_Func001Func001002003001001(), Trig_Blizzard_Slow_Func001Func001002003001002() )
endfunction

function Trig_Blizzard_Slow_Func001Func001002003002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), Player(0)) == true )
endfunction

function Trig_Blizzard_Slow_Func001Func001002003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Blizzard_Slow_Func001Func001002003001(), Trig_Blizzard_Slow_Func001Func001002003002() )
endfunction

function Trig_Blizzard_Slow_Func001Func004A takes nothing returns nothing
    call CreateNUnitsAtLoc( 1, 'h004', Player(0), udg_BlizzardPoint, bj_UNIT_FACING )
    call UnitApplyTimedLifeBJ( 4.00, 'BTLF', GetLastCreatedUnit() )
    call UnitAddAbilityBJ( 'A00R', GetLastCreatedUnit() )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "frostnova", GetEnumUnit() )
endfunction

function Trig_Blizzard_Slow_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_RedHero) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Blizzard_Slow_Actions takes nothing returns nothing
    if ( Trig_Blizzard_Slow_Func001C() ) then
        set udg_tempUGroup = GetUnitsInRangeOfLocMatching(225.00, udg_BlizzardPoint, Condition(function Trig_Blizzard_Slow_Func001Func001002003))
        call ForGroupBJ( udg_tempUGroup, function Trig_Blizzard_Slow_Func001Func004A )
        call DestroyGroup(udg_tempUGroup)
    else
        call PauseTimerBJ( true, udg_Blizzard_Timer[1] )
        call ConditionalTriggerExecute( gg_trg_Blizzard_Stop )
    endif
endfunction

//===========================================================================
function InitTrig_Blizzard_Slow takes nothing returns nothing
    set gg_trg_Blizzard_Slow = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Blizzard_Slow, udg_Blizzard_Timer[0] )
    call TriggerAddAction( gg_trg_Blizzard_Slow, function Trig_Blizzard_Slow_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Power
//===========================================================================
function Trig_Arcane_Power_Func001C takes nothing returns boolean
    if ( not ( udg_ArcaneEmpower == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Conditions takes nothing returns boolean
    if ( not Trig_Arcane_Power_Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func003C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00F' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func004C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00K' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func005C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Y' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func006C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func007C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01O' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func008C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func009C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01T' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func010C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Q' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func011C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01S' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func012C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01R' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func013Func004C takes nothing returns boolean
    if ( not ( GetUnitLevel(udg_RedHero) == 2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Func013C takes nothing returns boolean
    if ( not ( udg_tempBool == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Power_Actions takes nothing returns nothing
    set udg_tempBool = false
    if ( Trig_Arcane_Power_Func003C() ) then
        set udg_tempInt = 10
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func004C() ) then
        set udg_tempInt = 15
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func005C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func006C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func007C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func008C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func009C() ) then
        set udg_tempInt = 10
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func010C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func011C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func012C() ) then
        set udg_tempInt = 20
        set udg_tempBool = true
    else
    endif
    if ( Trig_Arcane_Power_Func013C() ) then
        call SuspendHeroXPBJ( true, udg_RedHero )
        call AddHeroXPSwapped( udg_tempInt, udg_RedHero, false )
        call SuspendHeroXPBJ( false, udg_RedHero )
        if ( Trig_Arcane_Power_Func013Func004C() ) then
            set udg_ArcaneEmpower = true
            call AddSpecialEffectTargetUnitBJ( "origin", udg_RedHero, "Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl" )
            call DestroyEffectBJ( GetLastCreatedEffectBJ() )
            call AddSpecialEffectTargetUnitBJ( "chest", udg_RedHero, "Abilities\\Weapons\\Bolt\\BoltImpact.mdl" )
            call UnitAddAbilityBJ( 'A01K', udg_RedHero )
            call UnitAddAbilityBJ( 'A01J', udg_RedHero )
            call UnitAddAbilityBJ( 'A01L', udg_RedHero )
            call AddSpecialEffectLocBJ( GetUnitLoc(udg_RedHero), "units\\nightelf\\Wisp\\Wisp.mdl" )
            call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 1.75 )
            call BlzSetSpecialEffectColorByPlayer( GetLastCreatedEffectBJ(), Player(7) )
            set udg_ArcaneEmp_SFX[0] = GetLastCreatedEffectBJ()
            call AddSpecialEffectLocBJ( GetUnitLoc(udg_RedHero), "Abilities\\Weapons\\WitchDoctorMissile\\WitchDoctorMissile.mdl" )
            call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 2.20 )
            set udg_ArcaneEmp_SFX[1] = GetLastCreatedEffectBJ()
            call StartTimerBJ( udg_ArcaneEmp_Timer[0], false, 7.00 )
            call StartTimerBJ( udg_ArcaneEmp_Timer[1], true, 0.01 )
        else
        endif
    else
    endif
endfunction

//===========================================================================
function InitTrig_Arcane_Power takes nothing returns nothing
    set gg_trg_Arcane_Power = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Arcane_Power, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Arcane_Power, Condition( function Trig_Arcane_Power_Conditions ) )
    call TriggerAddAction( gg_trg_Arcane_Power, function Trig_Arcane_Power_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Emp End
//===========================================================================
function Trig_Arcane_Emp_End_Actions takes nothing returns nothing
    call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[1] )
    call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[0] )
    call UnitRemoveAbilityBJ( 'A01K', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A01J', udg_RedHero )
    call UnitRemoveAbilityBJ( 'A01L', udg_RedHero )
    call DestroyEffectBJ( udg_ArcaneEmp_SFX[0] )
    call DestroyEffectBJ( udg_ArcaneEmp_SFX[1] )
    set udg_ArcaneEmpower = false
    call SuspendHeroXPBJ( true, udg_RedHero )
    call SetHeroLevelBJ( udg_RedHero, 1, false )
    call SuspendHeroXPBJ( false, udg_RedHero )
endfunction

//===========================================================================
function InitTrig_Arcane_Emp_End takes nothing returns nothing
    set gg_trg_Arcane_Emp_End = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Emp_End, udg_ArcaneEmp_Timer[0] )
    call TriggerAddAction( gg_trg_Arcane_Emp_End, function Trig_Arcane_Emp_End_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Emp Move Sfx
//===========================================================================
function Trig_Arcane_Emp_Move_Sfx_Func001C takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_RedHero) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Emp_Move_Sfx_Actions takes nothing returns nothing
    if ( Trig_Arcane_Emp_Move_Sfx_Func001C() ) then
        call TriggerExecute( gg_trg_Arcane_Emp_End )
    else
        set udg_tempPoint = GetUnitLoc(udg_RedHero)
        set udg_tempReal = GetLocationZ(udg_tempPoint)
        call BlzSetSpecialEffectPosition( udg_ArcaneEmp_SFX[0], GetLocationX(udg_tempPoint), GetLocationY(udg_tempPoint), ( udg_tempReal - 25.00 ) )
        call BlzSetSpecialEffectPosition( udg_ArcaneEmp_SFX[1], GetLocationX(udg_tempPoint), GetLocationY(udg_tempPoint), ( udg_tempReal + 75.00 ) )
        call RemoveLocation(udg_tempPoint)
    endif
endfunction

//===========================================================================
function InitTrig_Arcane_Emp_Move_Sfx takes nothing returns nothing
    set gg_trg_Arcane_Emp_Move_Sfx = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Emp_Move_Sfx, udg_ArcaneEmp_Timer[1] )
    call TriggerAddAction( gg_trg_Arcane_Emp_Move_Sfx, function Trig_Arcane_Emp_Move_Sfx_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Discharge
//===========================================================================
function Trig_Arcane_Discharge_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01I' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Discharge_Func001C takes nothing returns boolean
    if ( not ( udg_ArcaneEmpower == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Discharge_Actions takes nothing returns nothing
    if ( Trig_Arcane_Discharge_Func001C() ) then
        call UnitDamageTargetBJ( GetSpellAbilityUnit(), GetSpellTargetUnit(), ( 300.00 + 0.00 ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL )
    else
        set udg_tempInt = GetHeroXP(udg_RedHero)
        call UnitDamageTargetBJ( GetSpellAbilityUnit(), GetSpellTargetUnit(), ( 0.00 + ( I2R(GetHeroXP(udg_RedHero)) * 3.00 ) ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL )
        call SuspendHeroXPBJ( true, udg_RedHero )
        call SetHeroLevelBJ( udg_RedHero, 2, false )
        call SetHeroLevelBJ( udg_RedHero, 1, false )
        call AddHeroXPSwapped( ( udg_tempInt / 2 ), udg_RedHero, false )
        call SuspendHeroXPBJ( false, udg_RedHero )
    endif
    call AddSpecialEffectTargetUnitBJ( "origin", GetSpellTargetUnit(), "units\\nightelf\\Wisp\\Wisp.mdl" )
    call BlzSetSpecialEffectColorByPlayer( GetLastCreatedEffectBJ(), Player(21) )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call AddSpecialEffectTargetUnitBJ( "chest", GetSpellTargetUnit(), "Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call PlaySoundOnUnitBJ( gg_snd_SpellStealMissile, 75.00, GetSpellTargetUnit() )
endfunction

//===========================================================================
function InitTrig_Arcane_Discharge takes nothing returns nothing
    set gg_trg_Arcane_Discharge = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Arcane_Discharge, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Arcane_Discharge, Condition( function Trig_Arcane_Discharge_Conditions ) )
    call TriggerAddAction( gg_trg_Arcane_Discharge, function Trig_Arcane_Discharge_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Depletion
//===========================================================================
function Trig_Arcane_Depletion_Conditions takes nothing returns boolean
    if ( not ( udg_ArcaneEmpower == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Depletion_Func003C takes nothing returns boolean
    if ( not ( udg_tempInt > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Depletion_Actions takes nothing returns nothing
    set udg_tempInt = GetHeroXP(udg_RedHero)
    if ( Trig_Arcane_Depletion_Func003C() ) then
        call SuspendHeroXPBJ( true, udg_RedHero )
        call SetHeroLevelBJ( udg_RedHero, 2, false )
        call SetHeroLevelBJ( udg_RedHero, 1, false )
        call AddHeroXPSwapped( ( udg_tempInt - 1 ), udg_RedHero, false )
        call SuspendHeroXPBJ( false, udg_RedHero )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Arcane_Depletion takes nothing returns nothing
    set gg_trg_Arcane_Depletion = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Arcane_Depletion, 0.50 )
    call TriggerAddCondition( gg_trg_Arcane_Depletion, Condition( function Trig_Arcane_Depletion_Conditions ) )
    call TriggerAddAction( gg_trg_Arcane_Depletion, function Trig_Arcane_Depletion_Actions )
endfunction

//===========================================================================
// Trigger: Burn
//===========================================================================
function Trig_Burn_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Q' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Burn_Actions takes nothing returns nothing
    set udg_tempPoint = GetUnitLoc(GetSpellTargetUnit())
    call CreateNUnitsAtLoc( 1, 'h004', Player(0), udg_tempPoint, bj_UNIT_FACING )
    call UnitApplyTimedLifeBJ( 4.00, 'BTLF', GetLastCreatedUnit() )
    call UnitAddAbilityBJ( 'A01P', GetLastCreatedUnit() )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "acidbomb", GetSpellTargetUnit() )
    call AddSpecialEffectTargetUnitBJ( "chest", GetSpellTargetUnit(), "Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Burn takes nothing returns nothing
    set gg_trg_Burn = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Burn, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Burn, Condition( function Trig_Burn_Conditions ) )
    call TriggerAddAction( gg_trg_Burn, function Trig_Burn_Actions )
endfunction

//===========================================================================
// Trigger: Shock
//===========================================================================
function Trig_Shock_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01R' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shock_Actions takes nothing returns nothing
    set udg_tempPoint = GetUnitLoc(GetSpellTargetUnit())
    call UnitDamageTargetBJ( GetSpellAbilityUnit(), GetSpellTargetUnit(), 225.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC )
    call AddSpecialEffectTargetUnitBJ( "origin", GetSpellTargetUnit(), "Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call AddSpecialEffectTargetUnitBJ( "chest", GetSpellTargetUnit(), "Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl" )
    set udg_Shock_SFX = GetLastCreatedEffectBJ()
    call AddSpecialEffectTargetUnitBJ( "chest", GetSpellTargetUnit(), "Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 2.00 )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call RemoveLocation(udg_tempPoint)
    call StartTimerBJ( udg_Shock_Timer, false, 3.00 )
endfunction

//===========================================================================
function InitTrig_Shock takes nothing returns nothing
    set gg_trg_Shock = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Shock, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Shock, Condition( function Trig_Shock_Conditions ) )
    call TriggerAddAction( gg_trg_Shock, function Trig_Shock_Actions )
endfunction

//===========================================================================
// Trigger: Shock Destory Effect
//===========================================================================
function Trig_Shock_Destory_Effect_Actions takes nothing returns nothing
    call DestroyEffectBJ( udg_Shock_SFX )
    call PauseTimerBJ( true, udg_Shock_Timer )
endfunction

//===========================================================================
function InitTrig_Shock_Destory_Effect takes nothing returns nothing
    set gg_trg_Shock_Destory_Effect = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Shock_Destory_Effect, udg_Shock_Timer )
    call TriggerAddAction( gg_trg_Shock_Destory_Effect, function Trig_Shock_Destory_Effect_Actions )
endfunction

//===========================================================================
// Trigger: Magic Ward Start
//===========================================================================
function Trig_Magic_Ward_Start_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Y' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Magic_Ward_Start_Func001C takes nothing returns boolean
    if ( not ( udg_MagicWard_Running == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Magic_Ward_Start_Actions takes nothing returns nothing
    if ( Trig_Magic_Ward_Start_Func001C() ) then
        call TriggerExecute( gg_trg_Magic_Ward_Delayed_SFX_Destruction )
    else
    endif
    set udg_MagicWard_Running = true
    set udg_tempPoint = GetUnitLoc(udg_RedHero)
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Human\\ControlMagic\\ControlMagicTarget.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 1.85 )
    set udg_MagicWard_SFX[0] = GetLastCreatedEffectBJ()
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 2.25 )
    set udg_MagicWard_SFX[1] = GetLastCreatedEffectBJ()
    call StartTimerBJ( udg_MagicWard_Timer[1], true, 0.01 )
    call StartTimerBJ( udg_MagicWard_Timer[0], false, 8.00 )
    call StartTimerBJ( udg_MagicWard_Timer[2], false, 1.00 )
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Magic_Ward_Start takes nothing returns nothing
    set gg_trg_Magic_Ward_Start = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Magic_Ward_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Magic_Ward_Start, Condition( function Trig_Magic_Ward_Start_Conditions ) )
    call TriggerAddAction( gg_trg_Magic_Ward_Start, function Trig_Magic_Ward_Start_Actions )
endfunction

//===========================================================================
// Trigger: Untitled Trigger 002
//===========================================================================
function Trig_Untitled_Trigger_002_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Y' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Untitled_Trigger_002_Actions takes nothing returns nothing
    call DisplayTextToForce( GetPlayersAll(), "TRIGSTR_538" )
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_002 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_002 = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Untitled_Trigger_002, EVENT_PLAYER_UNIT_SPELL_ENDCAST )
    call TriggerAddCondition( gg_trg_Untitled_Trigger_002, Condition( function Trig_Untitled_Trigger_002_Conditions ) )
    call TriggerAddAction( gg_trg_Untitled_Trigger_002, function Trig_Untitled_Trigger_002_Actions )
endfunction

//===========================================================================
// Trigger: Magic Ward Update
//===========================================================================
function Trig_Magic_Ward_Update_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_RedHero) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Magic_Ward_Update_Actions takes nothing returns nothing
    if ( Trig_Magic_Ward_Update_Func001C() ) then
        call TriggerExecute( gg_trg_Magic_Ward_Delayed_SFX_Destruction )
    else
    endif
    set udg_tempPoint = GetUnitLoc(udg_RedHero)
    set udg_tempReal = GetLocationZ(udg_tempPoint)
    call BlzSetSpecialEffectPosition( udg_MagicWard_SFX[0], ( GetLocationX(udg_tempPoint) - 18.00 ), ( GetLocationY(udg_tempPoint) - 18.00 ), ( udg_tempReal + 200.00 ) )
    call BlzSetSpecialEffectPosition( udg_MagicWard_SFX[1], ( GetLocationX(udg_tempPoint) - 18.00 ), ( GetLocationY(udg_tempPoint) - 18.00 ), ( udg_tempReal - 20.00 ) )
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Magic_Ward_Update takes nothing returns nothing
    set gg_trg_Magic_Ward_Update = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Magic_Ward_Update, udg_MagicWard_Timer[1] )
    call TriggerAddAction( gg_trg_Magic_Ward_Update, function Trig_Magic_Ward_Update_Actions )
endfunction

//===========================================================================
// Trigger: Magic Ward Pause Effect
//===========================================================================
function Trig_Magic_Ward_Pause_Effect_Func001C takes nothing returns boolean
    if ( not ( udg_MagicWard_Running == true ) ) then
        return false
    endif
    if ( not ( IsUnitAliveBJ(udg_RedHero) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Magic_Ward_Pause_Effect_Conditions takes nothing returns boolean
    if ( not Trig_Magic_Ward_Pause_Effect_Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Magic_Ward_Pause_Effect_Actions takes nothing returns nothing
    call BlzSetSpecialEffectTimeScale( udg_MagicWard_SFX[0], 0.00 )
endfunction

//===========================================================================
function InitTrig_Magic_Ward_Pause_Effect takes nothing returns nothing
    set gg_trg_Magic_Ward_Pause_Effect = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Magic_Ward_Pause_Effect, udg_MagicWard_Timer[2] )
    call TriggerAddCondition( gg_trg_Magic_Ward_Pause_Effect, Condition( function Trig_Magic_Ward_Pause_Effect_Conditions ) )
    call TriggerAddAction( gg_trg_Magic_Ward_Pause_Effect, function Trig_Magic_Ward_Pause_Effect_Actions )
endfunction

//===========================================================================
// Trigger: Magic Ward End
//===========================================================================
function Trig_Magic_Ward_End_Actions takes nothing returns nothing
    set udg_MagicWard_Running = false
    call PauseTimerBJ( true, udg_MagicWard_Timer[0] )
    call PauseTimerBJ( true, udg_MagicWard_Timer[2] )
    call BlzSetSpecialEffectTimeScale( udg_MagicWard_SFX[0], 1.00 )
    call DestroyEffectBJ( udg_MagicWard_SFX[0] )
    call DestroyEffectBJ( udg_MagicWard_SFX[1] )
    call StartTimerBJ( udg_MagicWard_Timer[3], false, 2.00 )
endfunction

//===========================================================================
function InitTrig_Magic_Ward_End takes nothing returns nothing
    set gg_trg_Magic_Ward_End = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Magic_Ward_End, udg_MagicWard_Timer[0] )
    call TriggerAddAction( gg_trg_Magic_Ward_End, function Trig_Magic_Ward_End_Actions )
endfunction

//===========================================================================
// Trigger: Magic Ward Delayed SFX Destruction
//===========================================================================
function Trig_Magic_Ward_Delayed_SFX_Destruction_Actions takes nothing returns nothing
    call PauseTimerBJ( true, udg_MagicWard_Timer[1] )
    call PauseTimerBJ( true, udg_MagicWard_Timer[3] )
endfunction

//===========================================================================
function InitTrig_Magic_Ward_Delayed_SFX_Destruction takes nothing returns nothing
    set gg_trg_Magic_Ward_Delayed_SFX_Destruction = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Magic_Ward_Delayed_SFX_Destruction, udg_MagicWard_Timer[3] )
    call TriggerAddAction( gg_trg_Magic_Ward_Delayed_SFX_Destruction, function Trig_Magic_Ward_Delayed_SFX_Destruction_Actions )
endfunction

//===========================================================================
// Trigger: Ice Lance Start
//===========================================================================
function Trig_Ice_Lance_Start_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01T' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ice_Lance_Start_Actions takes nothing returns nothing
    set udg_IceLance_EnemyCheckCounter = 0
    call DestroyEffectBJ( udg_IceLance_MissileSFX[0] )
    call DestroyEffectBJ( udg_IceLance_MissileSFX[1] )
    call GroupClear( udg_IceLance_Hits )
    set udg_IceLance_DistTrav = 0.00
    set udg_tempPoint = GetUnitLoc(GetSpellAbilityUnit())
    set udg_tempPoint2 = GetSpellTargetLoc()
    set udg_IceLance_MissilePos[0] = GetLocationX(udg_tempPoint)
    set udg_IceLance_MissilePos[1] = GetLocationY(udg_tempPoint)
    set udg_IceLance_MissilePos[2] = ( BlzGetLocalUnitZ(udg_RedHero) + 400.00 )
    set udg_tempReal = AngleBetweenPoints(udg_tempPoint, udg_tempPoint2)
    set udg_IceLance_Direction = AngleBetweenPoints(udg_tempPoint, udg_tempPoint2)
    set udg_IceLance_Velocity[0] = CosBJ(udg_IceLance_Direction)
    set udg_IceLance_Velocity[1] = SinBJ(udg_IceLance_Direction)
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Weapons\\LichMissile\\LichMissile.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 1.50 )
    call BlzSetSpecialEffectRoll( GetLastCreatedEffectBJ(), Deg2Rad(udg_IceLance_Direction) )
    set udg_IceLance_MissileSFX[0] = GetLastCreatedEffectBJ()
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl" )
    call BlzSetSpecialEffectRoll( GetLastCreatedEffectBJ(), Deg2Rad(udg_IceLance_Direction) )
    set udg_IceLance_MissileSFX[1] = GetLastCreatedEffectBJ()
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl" )
    call BlzSetSpecialEffectRoll( GetLastCreatedEffectBJ(), Deg2Rad(udg_IceLance_Direction) )
    set udg_IceLance_MissileSFX[2] = GetLastCreatedEffectBJ()
    call PlaySoundOnUnitBJ( gg_snd_IceLanceFire, 75.00, GetSpellAbilityUnit() )
    call StartTimerBJ( udg_IceLance_Timer[0], true, 0.01 )
    set udg_IceLance_DistTrav = 0.00
    call RemoveLocation(udg_tempPoint2)
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Ice_Lance_Start takes nothing returns nothing
    set gg_trg_Ice_Lance_Start = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Ice_Lance_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Ice_Lance_Start, Condition( function Trig_Ice_Lance_Start_Conditions ) )
    call TriggerAddAction( gg_trg_Ice_Lance_Start, function Trig_Ice_Lance_Start_Actions )
endfunction

//===========================================================================
// Trigger: Ice Lance Move
//===========================================================================
function Trig_Ice_Lance_Move_Func011C takes nothing returns boolean
    if ( not ( udg_IceLance_EnemyCheckCounter >= 10 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ice_Lance_Move_Func012C takes nothing returns boolean
    if ( not ( udg_IceLance_DistTrav >= 550.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ice_Lance_Move_Actions takes nothing returns nothing
    set udg_tempPoint = Location(udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1])
    set udg_IceLance_MissilePos[0] = ( udg_IceLance_MissilePos[0] + ( udg_IceLance_Velocity[0] * 12.00 ) )
    set udg_IceLance_MissilePos[1] = ( udg_IceLance_MissilePos[1] + ( udg_IceLance_Velocity[1] * 12.00 ) )
    set udg_tempPoint2 = Location(udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1])
    set udg_IceLance_DistTrav = ( udg_IceLance_DistTrav + DistanceBetweenPoints(udg_tempPoint, udg_tempPoint2) )
    set udg_IceLance_MissilePos[2] = GetLocationZ(udg_tempPoint2) + 50
    call BlzSetSpecialEffectPosition( udg_IceLance_MissileSFX[0], udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1], udg_IceLance_MissilePos[2] )
    call BlzSetSpecialEffectPosition( udg_IceLance_MissileSFX[1], udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1], udg_IceLance_MissilePos[2] )
    call BlzSetSpecialEffectPosition( udg_IceLance_MissileSFX[2], udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1], udg_IceLance_MissilePos[2] )
    set udg_IceLance_EnemyCheckCounter = ( udg_IceLance_EnemyCheckCounter + 1 )
    if ( Trig_Ice_Lance_Move_Func011C() ) then
        set udg_IceLance_EnemyCheckCounter = 0
        call TriggerExecute( gg_trg_Ice_Lance_Damage )
    else
    endif
    if ( Trig_Ice_Lance_Move_Func012C() ) then
        call PlaySoundAtPointBJ( gg_snd_IceLanceHit, 75.00, udg_tempPoint2, 0 )
        call ConditionalTriggerExecute( gg_trg_Ice_Lance_Damage )
        call DestroyEffectBJ( udg_IceLance_MissileSFX[0] )
        call DestroyEffectBJ( udg_IceLance_MissileSFX[1] )
        call DestroyEffectBJ( udg_IceLance_MissileSFX[2] )
        call PauseTimerBJ( true, udg_IceLance_Timer[0] )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Ice_Lance_Move takes nothing returns nothing
    set gg_trg_Ice_Lance_Move = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Ice_Lance_Move, udg_IceLance_Timer[0] )
    call TriggerAddAction( gg_trg_Ice_Lance_Move, function Trig_Ice_Lance_Move_Actions )
endfunction

//===========================================================================
// Trigger: Ice Lance Damage
//===========================================================================
function Trig_Ice_Lance_Damage_Func002002003001001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Ice_Lance_Damage_Func002002003001002 takes nothing returns boolean
    return ( IsUnitInGroup(GetFilterUnit(), udg_IceLance_Hits) != true )
endfunction

function Trig_Ice_Lance_Damage_Func002002003001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Ice_Lance_Damage_Func002002003001001(), Trig_Ice_Lance_Damage_Func002002003001002() )
endfunction

function Trig_Ice_Lance_Damage_Func002002003002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), Player(0)) == true )
endfunction

function Trig_Ice_Lance_Damage_Func002002003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Ice_Lance_Damage_Func002002003001(), Trig_Ice_Lance_Damage_Func002002003002() )
endfunction

function Trig_Ice_Lance_Damage_Func003A takes nothing returns nothing
    call CreateNUnitsAtLoc( 1, 'h004', Player(0), udg_tempPoint, bj_UNIT_FACING )
    call UnitApplyTimedLifeBJ( 4.00, 'BTLF', GetLastCreatedUnit() )
    call UnitAddAbilityBJ( 'A00R', GetLastCreatedUnit() )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "frostnova", GetEnumUnit() )
    call UnitDamageTargetBJ( udg_RedHero, GetEnumUnit(), 80.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC )
    call AddSpecialEffectTargetUnitBJ( "chest", GetEnumUnit(), "Abilities\\Weapons\\LichMissile\\LichMissile.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
endfunction

function Trig_Ice_Lance_Damage_Actions takes nothing returns nothing
    set udg_tempPoint = Location(udg_IceLance_MissilePos[0], udg_IceLance_MissilePos[1])
    set udg_tempUGroup = GetUnitsInRangeOfLocMatching(80.00, udg_tempPoint, Condition(function Trig_Ice_Lance_Damage_Func002002003))
    call ForGroupBJ( udg_tempUGroup, function Trig_Ice_Lance_Damage_Func003A )
    call GroupAddGroup( udg_tempUGroup, udg_IceLance_Hits )
    call RemoveLocation(udg_tempPoint)
    call DestroyGroup(udg_tempUGroup)
endfunction

//===========================================================================
function InitTrig_Ice_Lance_Damage takes nothing returns nothing
    set gg_trg_Ice_Lance_Damage = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Ice_Lance_Damage, function Trig_Ice_Lance_Damage_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Barrage Start
//===========================================================================
function Trig_Arcane_Barrage_Start_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01S' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Barrage_Start_Actions takes nothing returns nothing
    set udg_ArcaneBarrage_Counter[0] = 0
    set udg_ArcaneBarrage_Target = GetSpellTargetUnit()
    set udg_tempPoint = GetUnitLoc(udg_ArcaneBarrage_Target)
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl" )
    call BlzSetSpecialEffectTimeScale( GetLastCreatedEffectBJ(), 2.50 )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 0.60 )
    set udg_ArcaneBarrage_BuffSFX = GetLastCreatedEffectBJ()
    call RemoveLocation(udg_tempPoint)
    call StartTimerBJ( udg_ArcaneBarrage_Timer[0], true, 1.50 )
    call StartTimerBJ( udg_ArcaneBarrage_Timer[2], true, 0.05 )
    call StartTimerBJ( udg_ArcaneBarrage_Timer[3], false, 3.70 )
endfunction

//===========================================================================
function InitTrig_Arcane_Barrage_Start takes nothing returns nothing
    set gg_trg_Arcane_Barrage_Start = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Arcane_Barrage_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Arcane_Barrage_Start, Condition( function Trig_Arcane_Barrage_Start_Conditions ) )
    call TriggerAddAction( gg_trg_Arcane_Barrage_Start, function Trig_Arcane_Barrage_Start_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Barrage Buff
//===========================================================================
function Trig_Arcane_Barrage_Buff_Actions takes nothing returns nothing
    set udg_tempPoint = GetUnitLoc(udg_ArcaneBarrage_Target)
    call BlzSetSpecialEffectPositionLoc( udg_ArcaneBarrage_BuffSFX, udg_tempPoint )
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Arcane_Barrage_Buff takes nothing returns nothing
    set gg_trg_Arcane_Barrage_Buff = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Barrage_Buff, udg_ArcaneBarrage_Timer[2] )
    call TriggerAddAction( gg_trg_Arcane_Barrage_Buff, function Trig_Arcane_Barrage_Buff_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Barrage Fall
//===========================================================================
function Trig_Arcane_Barrage_Fall_Func002C takes nothing returns boolean
    if ( not ( udg_ArcaneBarrage_Counter[0] >= 2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arcane_Barrage_Fall_Actions takes nothing returns nothing
    set udg_ArcaneBarrage_Counter[0] = ( udg_ArcaneBarrage_Counter[0] + 1 )
    if ( Trig_Arcane_Barrage_Fall_Func002C() ) then
        call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[0] )
    else
    endif
    call AddSpecialEffectTargetUnitBJ( "origin", udg_ArcaneBarrage_Target, "Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 0.30 )
    set udg_ArcaneBarrage_SFX = GetLastCreatedEffectBJ()
    call StartTimerBJ( udg_ArcaneBarrage_Timer[1], false, 0.70 )
endfunction

//===========================================================================
function InitTrig_Arcane_Barrage_Fall takes nothing returns nothing
    set gg_trg_Arcane_Barrage_Fall = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Barrage_Fall, udg_ArcaneBarrage_Timer[0] )
    call TriggerAddAction( gg_trg_Arcane_Barrage_Fall, function Trig_Arcane_Barrage_Fall_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Barrage Damage
//===========================================================================
function Trig_Arcane_Barrage_Damage_Func003002003001001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Arcane_Barrage_Damage_Func003002003001002 takes nothing returns boolean
    return ( GetFilterUnit() != udg_ArcaneBarrage_Target )
endfunction

function Trig_Arcane_Barrage_Damage_Func003002003001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Arcane_Barrage_Damage_Func003002003001001(), Trig_Arcane_Barrage_Damage_Func003002003001002() )
endfunction

function Trig_Arcane_Barrage_Damage_Func003002003002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), Player(0)) == true )
endfunction

function Trig_Arcane_Barrage_Damage_Func003002003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Arcane_Barrage_Damage_Func003002003001(), Trig_Arcane_Barrage_Damage_Func003002003002() )
endfunction

function Trig_Arcane_Barrage_Damage_Func004A takes nothing returns nothing
    call UnitDamageTargetBJ( udg_RedHero, GetEnumUnit(), 40.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC )
    call AddSpecialEffectTargetUnitBJ( "chest", GetEnumUnit(), "Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
endfunction

function Trig_Arcane_Barrage_Damage_Actions takes nothing returns nothing
    call UnitDamageTargetBJ( udg_RedHero, udg_ArcaneBarrage_Target, 100.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC )
    set udg_tempPoint = GetUnitLoc(udg_ArcaneBarrage_Target)
    set udg_tempUGroup = GetUnitsInRangeOfLocMatching(175.00, udg_tempPoint, Condition(function Trig_Arcane_Barrage_Damage_Func003002003))
    call ForGroupBJ( udg_tempUGroup, function Trig_Arcane_Barrage_Damage_Func004A )
    call DestroyEffectBJ( udg_ArcaneBarrage_SFX )
    call RemoveLocation(udg_tempPoint)
    call DestroyGroup(udg_tempUGroup)
endfunction

//===========================================================================
function InitTrig_Arcane_Barrage_Damage takes nothing returns nothing
    set gg_trg_Arcane_Barrage_Damage = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Barrage_Damage, udg_ArcaneBarrage_Timer[1] )
    call TriggerAddAction( gg_trg_Arcane_Barrage_Damage, function Trig_Arcane_Barrage_Damage_Actions )
endfunction

//===========================================================================
// Trigger: Arcane Barrage End
//===========================================================================
function Trig_Arcane_Barrage_End_Actions takes nothing returns nothing
    call DestroyEffectBJ( udg_ArcaneBarrage_BuffSFX )
    call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[0] )
    call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[2] )
    call PauseTimerBJ( true, udg_ArcaneBarrage_Timer[3] )
endfunction

//===========================================================================
function InitTrig_Arcane_Barrage_End takes nothing returns nothing
    set gg_trg_Arcane_Barrage_End = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Arcane_Barrage_End, udg_ArcaneBarrage_Timer[3] )
    call TriggerAddAction( gg_trg_Arcane_Barrage_End, function Trig_Arcane_Barrage_End_Actions )
endfunction

//===========================================================================
// Trigger: Unstable Magic Start
//===========================================================================
function Trig_Unstable_Magic_Start_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01O' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unstable_Magic_Start_Actions takes nothing returns nothing
    call SetUnitAbilityLevelSwapped( 'A014', udg_RedHero, 2 )
    call StartTimerBJ( udg_UnstableMagic_Timer[0], false, 4.00 )
endfunction

//===========================================================================
function InitTrig_Unstable_Magic_Start takes nothing returns nothing
    set gg_trg_Unstable_Magic_Start = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Unstable_Magic_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Unstable_Magic_Start, Condition( function Trig_Unstable_Magic_Start_Conditions ) )
    call TriggerAddAction( gg_trg_Unstable_Magic_Start, function Trig_Unstable_Magic_Start_Actions )
endfunction

//===========================================================================
// Trigger: Unstable Magic Stop
//===========================================================================
function Trig_Unstable_Magic_Stop_Actions takes nothing returns nothing
    call SetUnitAbilityLevelSwapped( 'A014', udg_RedHero, 1 )
endfunction

//===========================================================================
function InitTrig_Unstable_Magic_Stop takes nothing returns nothing
    set gg_trg_Unstable_Magic_Stop = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Unstable_Magic_Stop, udg_UnstableMagic_Timer[0] )
    call TriggerAddAction( gg_trg_Unstable_Magic_Stop, function Trig_Unstable_Magic_Stop_Actions )
endfunction

//===========================================================================
// Trigger: Event Init
//===========================================================================
function Trig_Event_Init_Func001002 takes nothing returns nothing
    call SetDestructableInvulnerableBJ( GetEnumDestructable(), true )
endfunction

function Trig_Event_Init_Actions takes nothing returns nothing
    call EnumDestructablesInRectAll( gg_rct_MF_InvulnDestru, function Trig_Event_Init_Func001002 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUTIN, 3.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.50 )
    call SetTimeOfDay( 24.00 )
    call SetTimeOfDayScalePercentBJ( 0.00 )
    call PauseAllUnitsBJ( true )
    call SetUnitPositionLocFacingBJ( udg_RedHero, GetRectCenter(gg_rct_MorbentAttackZone), 90.00 )
    call SetCameraBoundsToRectForPlayerBJ( Player(0), gg_rct_MF_Cam_Bounds )
    call PanCameraToTimedLocForPlayer( Player(0), GetRectCenter(gg_rct_MorbentAttackZone), 0 )
    call SetCameraFieldForPlayer( Player(0), CAMERA_FIELD_TARGET_DISTANCE, 2000.00, 0 )
    call CreateFogModifierRectBJ( true, Player(0), FOG_OF_WAR_VISIBLE, gg_rct_MF_Cam_Bounds )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\DarkAgents.mp3" )
    call TriggerSleepAction( 2.50 )
    call SetUnitFacingToFaceUnitTimed( udg_RedHero, gg_unit_h007_0021, 0.50 )
    call SetUnitFacingToFaceUnitTimed( gg_unit_h007_0021, udg_RedHero, 0.50 )
    call DisplayTimedTextToForce( GetPlayersAll(), 7.00, "TRIGSTR_138" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), gg_unit_h007_0021, "TRIGSTR_140", null, "TRIGSTR_141", bj_TIMETYPE_SET, 7.00, true )
    call EnableTrigger( gg_trg_Ghoul_Spawn )
    call EnableTrigger( gg_trg_Plague_Zombie_Spawn )
    call EnableTrigger( gg_trg_Skeletal_Mages )
    call EnableTrigger( gg_trg_Skeleton_Spawns )
    call DisplayTimedTextToForce( GetPlayersAll(), 10.00, "TRIGSTR_139" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), gg_unit_h007_0021, "TRIGSTR_142", null, "TRIGSTR_143", bj_TIMETYPE_SET, 10.00, true )
    call StartTimerBJ( udg_MFTimer, false, 150.00 )
    call CreateTimerDialogBJ( GetLastCreatedTimerBJ(), "TRIGSTR_144" )
    call TimerDialogDisplayForPlayerBJ( true, GetLastCreatedTimerDialogBJ(), Player(0) )
    set udg_MF_TimerWindow = GetLastCreatedTimerDialogBJ()
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\PursuitTheme.mp3" )
    call PauseAllUnitsBJ( false )
    call PauseUnitBJ( true, gg_unit_u000_0020 )
endfunction

//===========================================================================
function InitTrig_Event_Init takes nothing returns nothing
    set gg_trg_Event_Init = CreateTrigger(  )
    call TriggerRegisterPlayerChatEvent( gg_trg_Event_Init, Player(0), "-morbentfell", true )
    call TriggerAddAction( gg_trg_Event_Init, function Trig_Event_Init_Actions )
endfunction

//===========================================================================
// Trigger: Morbent Init Trigger
//===========================================================================
function Trig_Morbent_Init_Trigger_Actions takes nothing returns nothing
    set udg_MorbenFell_Booleans[4] = false
    call AddSpecialEffectTargetUnitBJ( "origin", gg_unit_u000_0020, "Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl" )
    set udg_NecroSFX = GetLastCreatedEffectBJ()
    call PauseUnitBJ( true, gg_unit_u000_0020 )
    call SetUnitInvulnerable( gg_unit_u000_0020, true )
    call SetUnitAnimation( gg_unit_u000_0020, "channel" )
    call PauseUnitBJ( true, gg_unit_u006_0035 )
    call SetUnitAnimation( gg_unit_u006_0035, "channel" )
    call PauseUnitBJ( true, gg_unit_u006_0040 )
    call SetUnitAnimation( gg_unit_u006_0040, "channel" )
    set udg_AcolytePoint[1] = GetUnitLoc(gg_unit_n002_0039)
    set udg_AcolytePoint[2] = GetUnitLoc(gg_unit_n002_0031)
    set udg_AcolytePoint[3] = GetUnitLoc(gg_unit_n002_0030)
endfunction

//===========================================================================
function InitTrig_Morbent_Init_Trigger takes nothing returns nothing
    set gg_trg_Morbent_Init_Trigger = CreateTrigger(  )
    call TriggerRegisterTimerEventSingle( gg_trg_Morbent_Init_Trigger, 0.01 )
    call TriggerAddAction( gg_trg_Morbent_Init_Trigger, function Trig_Morbent_Init_Trigger_Actions )
endfunction

//===========================================================================
// Trigger: Time runs out
//===========================================================================
function Trig_Time_runs_out_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_Cauldron_Dies )
    call TriggerSleepAction( 1.50 )
    call CreateNUnitsAtLoc( 1, 'u009', Player(11), GetRectCenter(gg_rct_MorbentFel), bj_UNIT_FACING )
    set udg_Abom = GetLastCreatedUnit()
    call AddSpecialEffectTargetUnitBJ( "origin", GetLastCreatedUnit(), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    call BlzSetSpecialEffectScale( GetLastCreatedEffectBJ(), 3.00 )
    call PauseUnitBJ( true, GetLastCreatedUnit() )
    call SetUnitAnimation( GetLastCreatedUnit(), "stand; 2" )
    call TriggerSleepAction( 2.00 )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\Doom.mp3" )
    call IssuePointOrderLocBJ( udg_Abom, "attack", GetUnitLoc(udg_RedHero) )
    call PlaySoundOnUnitBJ( gg_snd_AbominationPissed5, 100, udg_Abom )
    call PauseUnitBJ( false, udg_Abom )
    call DestroyTimerDialogBJ( udg_MF_TimerWindow )
    call EnableTrigger( gg_trg_Zone_Exit )
endfunction

//===========================================================================
function InitTrig_Time_runs_out takes nothing returns nothing
    set gg_trg_Time_runs_out = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Time_runs_out, udg_MFTimer )
    call TriggerAddAction( gg_trg_Time_runs_out, function Trig_Time_runs_out_Actions )
endfunction

//===========================================================================
// Trigger: Acolyte Animation
//===========================================================================
function Trig_Acolyte_Animation_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0030) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Animation_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0039) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Animation_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0031) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Animation_Actions takes nothing returns nothing
    if ( Trig_Acolyte_Animation_Func001C() ) then
        call SetUnitAnimation( gg_unit_n002_0030, "work" )
        call AddSpecialEffectTargetUnitBJ( "origin", gg_unit_n002_0030, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl" )
    else
    endif
    if ( Trig_Acolyte_Animation_Func002C() ) then
        call SetUnitAnimation( gg_unit_n002_0039, "work" )
    else
    endif
    if ( Trig_Acolyte_Animation_Func003C() ) then
        call SetUnitAnimation( gg_unit_n002_0031, "work" )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Acolyte_Animation takes nothing returns nothing
    set gg_trg_Acolyte_Animation = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Acolyte_Animation, 2.27 )
    call TriggerAddAction( gg_trg_Acolyte_Animation, function Trig_Acolyte_Animation_Actions )
endfunction

//===========================================================================
// Trigger: Ghoul Spawn
//===========================================================================
function Trig_Ghoul_Spawn_Conditions takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0031) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ghoul_Spawn_Func008C takes nothing returns boolean
    if ( not ( udg_MorbenFell_Booleans[1] == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ghoul_Spawn_Actions takes nothing returns nothing
    set udg_tempPoint = GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(gg_unit_n002_0031), 300.00, 300.00))
    call CreateNUnitsAtLoc( 1, 'u001', Player(11), udg_tempPoint, bj_UNIT_FACING )
    call SetUnitAnimation( gg_unit_n002_0030, "attack" )
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_n002_0031), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    if ( Trig_Ghoul_Spawn_Func008C() ) then
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRectCenter(gg_rct_MF_Exit1) )
    else
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
    endif
endfunction

//===========================================================================
function InitTrig_Ghoul_Spawn takes nothing returns nothing
    set gg_trg_Ghoul_Spawn = CreateTrigger(  )
    call DisableTrigger( gg_trg_Ghoul_Spawn )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Ghoul_Spawn, 12.00 )
    call TriggerAddCondition( gg_trg_Ghoul_Spawn, Condition( function Trig_Ghoul_Spawn_Conditions ) )
    call TriggerAddAction( gg_trg_Ghoul_Spawn, function Trig_Ghoul_Spawn_Actions )
endfunction

//===========================================================================
// Trigger: Plague Zombie Spawn
//===========================================================================
function Trig_Plague_Zombie_Spawn_Conditions takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0039) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Plague_Zombie_Spawn_Func007C takes nothing returns boolean
    if ( not ( udg_MorbenFell_Booleans[1] == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Plague_Zombie_Spawn_Actions takes nothing returns nothing
    set udg_tempPoint = GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(gg_unit_n002_0039), 300.00, 300.00))
    call CreateNUnitsAtLoc( 1, 'n001', Player(11), udg_tempPoint, bj_UNIT_FACING )
    call SetUnitAnimation( gg_unit_n002_0039, "attack" )
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_n002_0039), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    if ( Trig_Plague_Zombie_Spawn_Func007C() ) then
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRectCenter(gg_rct_MF_Exit1) )
    else
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
    endif
endfunction

//===========================================================================
function InitTrig_Plague_Zombie_Spawn takes nothing returns nothing
    set gg_trg_Plague_Zombie_Spawn = CreateTrigger(  )
    call DisableTrigger( gg_trg_Plague_Zombie_Spawn )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Plague_Zombie_Spawn, 19.00 )
    call TriggerAddCondition( gg_trg_Plague_Zombie_Spawn, Condition( function Trig_Plague_Zombie_Spawn_Conditions ) )
    call TriggerAddAction( gg_trg_Plague_Zombie_Spawn, function Trig_Plague_Zombie_Spawn_Actions )
endfunction

//===========================================================================
// Trigger: Skeletal Mages
//===========================================================================
function Trig_Skeletal_Mages_Conditions takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0030) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Skeletal_Mages_Func007C takes nothing returns boolean
    if ( not ( udg_MorbenFell_Booleans[1] == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Skeletal_Mages_Actions takes nothing returns nothing
    set udg_tempPoint = GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(gg_unit_n002_0030), 300.00, 300.00))
    call CreateNUnitsAtLoc( 1, 'u002', Player(11), udg_tempPoint, bj_UNIT_FACING )
    call SetUnitAnimation( gg_unit_n002_0030, "attack" )
    call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_n002_0030), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    if ( Trig_Skeletal_Mages_Func007C() ) then
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRectCenter(gg_rct_MF_Exit1) )
    else
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
    endif
endfunction

//===========================================================================
function InitTrig_Skeletal_Mages takes nothing returns nothing
    set gg_trg_Skeletal_Mages = CreateTrigger(  )
    call DisableTrigger( gg_trg_Skeletal_Mages )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Skeletal_Mages, 13.00 )
    call TriggerAddCondition( gg_trg_Skeletal_Mages, Condition( function Trig_Skeletal_Mages_Conditions ) )
    call TriggerAddAction( gg_trg_Skeletal_Mages, function Trig_Skeletal_Mages_Actions )
endfunction

//===========================================================================
// Trigger: Skeleton Spawns
//===========================================================================
function Trig_Skeleton_Spawns_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_u006_0040) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Skeleton_Spawns_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_u006_0035) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Skeleton_Spawns_Actions takes nothing returns nothing
    if ( Trig_Skeleton_Spawns_Func001C() ) then
        set udg_tempPoint = GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(gg_unit_u006_0040), 300.00, 300.00))
        call CreateNUnitsAtLoc( 1, 'n003', Player(11), udg_tempPoint, bj_UNIT_FACING )
        call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_u006_0040), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetRectCenter(gg_rct_MorbentAttackZone) )
    else
    endif
    if ( Trig_Skeleton_Spawns_Func002C() ) then
        set udg_tempPoint = GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(gg_unit_u006_0035), 300.00, 300.00))
        call CreateNUnitsAtLoc( 1, 'u007', Player(11), udg_tempPoint, bj_UNIT_FACING )
        call AddSpecialEffectLocBJ( udg_tempPoint, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_u006_0035), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetRectCenter(gg_rct_MorbentAttackZone) )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Skeleton_Spawns takes nothing returns nothing
    set gg_trg_Skeleton_Spawns = CreateTrigger(  )
    call DisableTrigger( gg_trg_Skeleton_Spawns )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Skeleton_Spawns, 6.00 )
    call TriggerAddAction( gg_trg_Skeleton_Spawns, function Trig_Skeleton_Spawns_Actions )
endfunction

//===========================================================================
// Trigger: Zone Exit
//===========================================================================
function Trig_Zone_Exit_Actions takes nothing returns nothing
    call SetUnitPositionLocFacingLocBJ( GetEnteringUnit(), GetRectCenter(gg_rct_MF_Exit_2), GetRectCenter(gg_rct_MorbentAttackZone) )
    call IssuePointOrderLocBJ( GetEnteringUnit(), "attack", GetRectCenter(gg_rct_MorbentAttackZone) )
endfunction

//===========================================================================
function InitTrig_Zone_Exit takes nothing returns nothing
    set gg_trg_Zone_Exit = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Zone_Exit, gg_rct_MF_Exit1 )
    call TriggerAddAction( gg_trg_Zone_Exit, function Trig_Zone_Exit_Actions )
endfunction

//===========================================================================
// Trigger: MF Phase 2 Init
//===========================================================================
function Trig_MF_Phase_2_Init_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_RedHero ) ) then
        return false
    endif
    return true
endfunction

function Trig_MF_Phase_2_Init_Func008002 takes nothing returns nothing
    call SetUnitPositionLoc( GetEnumUnit(), GetRectCenter(gg_rct_Region_012) )
endfunction

function Trig_MF_Phase_2_Init_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetCameraBoundsToRectForPlayerBJ( Player(0), gg_rct_MorbentFel )
    call CreateFogModifierRectBJ( true, Player(0), FOG_OF_WAR_VISIBLE, gg_rct_MorbentFel )
    call CreateFogModifierRectBJ( true, Player(0), FOG_OF_WAR_VISIBLE, gg_rct_MFGraveyard )
    call DisplayTimedTextToForce( GetPlayersAll(), 4.00, "TRIGSTR_147" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), gg_unit_u000_0020, "TRIGSTR_148", null, "TRIGSTR_149", bj_TIMETYPE_SET, 4.00, false )
    call TriggerSleepAction( 2 )
    call ForGroupBJ( GetUnitsInRectOfPlayer(gg_rct_MF_Cam_Bounds, Player(11)), function Trig_MF_Phase_2_Init_Func008002 )
    call CreateDestructableLoc( 'Dofw', GetRectCenter(gg_rct_MFForceWall), 270.00, 1, 1 )
endfunction

//===========================================================================
function InitTrig_MF_Phase_2_Init takes nothing returns nothing
    set gg_trg_MF_Phase_2_Init = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_MF_Phase_2_Init, gg_rct_MorbentFel )
    call TriggerAddCondition( gg_trg_MF_Phase_2_Init, Condition( function Trig_MF_Phase_2_Init_Conditions ) )
    call TriggerAddAction( gg_trg_MF_Phase_2_Init, function Trig_MF_Phase_2_Init_Actions )
endfunction

//===========================================================================
// Trigger: Necromancer Death
//===========================================================================
function Trig_Necromancer_Death_Func001Func004Func001001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_u006_0040) == false )
endfunction

function Trig_Necromancer_Death_Func001Func004Func001002 takes nothing returns boolean
    return ( GetDyingUnit() == gg_unit_u006_0035 )
endfunction

function Trig_Necromancer_Death_Func001Func004Func002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_u006_0035) == false )
endfunction

function Trig_Necromancer_Death_Func001Func004Func002002 takes nothing returns boolean
    return ( GetDyingUnit() == gg_unit_u006_0040 )
endfunction

function Trig_Necromancer_Death_Func001Func004C takes nothing returns boolean
    if ( GetBooleanAnd( Trig_Necromancer_Death_Func001Func004Func001001(), Trig_Necromancer_Death_Func001Func004Func001002() ) ) then
        return true
    endif
    if ( GetBooleanAnd( Trig_Necromancer_Death_Func001Func004Func002001(), Trig_Necromancer_Death_Func001Func004Func002002() ) ) then
        return true
    endif
    return false
endfunction

function Trig_Necromancer_Death_Func001C takes nothing returns boolean
    if ( not Trig_Necromancer_Death_Func001Func004C() ) then
        return false
    endif
    return true
endfunction

function Trig_Necromancer_Death_Actions takes nothing returns nothing
    if ( Trig_Necromancer_Death_Func001C() ) then
        set udg_MorbenFell_Booleans[1] = true
        call DisableTrigger( gg_trg_Zone_Exit )
        call KillDestructable( gg_dest_Dofw_0033 )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Necromancer_Death takes nothing returns nothing
    set gg_trg_Necromancer_Death = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Necromancer_Death, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Necromancer_Death, function Trig_Necromancer_Death_Actions )
endfunction

//===========================================================================
// Trigger: Cauldron Dies
//===========================================================================
function Trig_Cauldron_Dies_Func001002002001 takes nothing returns boolean
    return ( 'n002' == GetUnitTypeId(GetFilterUnit()) )
endfunction

function Trig_Cauldron_Dies_Func001002002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Cauldron_Dies_Func001002002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Cauldron_Dies_Func001002002001(), Trig_Cauldron_Dies_Func001002002002() )
endfunction

function Trig_Cauldron_Dies_Func002001 takes nothing returns boolean
    return ( CountUnitsInGroup(udg_tempUGroup) <= 0 )
endfunction

function Trig_Cauldron_Dies_Func003001 takes nothing returns boolean
    return ( CountUnitsInGroup(udg_tempUGroup) >= 3 )
endfunction

function Trig_Cauldron_Dies_Func022C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0039) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cauldron_Dies_Func023C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0031) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cauldron_Dies_Func024C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0030) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cauldron_Dies_Actions takes nothing returns nothing
    set udg_tempUGroup = GetUnitsInRectMatching(gg_rct_MorbentFel, Condition(function Trig_Cauldron_Dies_Func001002002))
    if ( Trig_Cauldron_Dies_Func002001() ) then
        call QuestItemSetCompletedBJ( udg_MFQuestRequirements[1], true )
    else
        call DoNothing(  )
    endif
    if ( Trig_Cauldron_Dies_Func003001() ) then
        call QuestItemSetCompletedBJ( udg_MFQuestRequirements[3], true )
    else
        call DoNothing(  )
    endif
    call DestroyTimerDialogBJ( udg_MF_TimerWindow )
    call DisableTrigger( gg_trg_Time_runs_out )
    call DoNothing(  )
    call TriggerSleepAction( 1.50 )
    call StopMusicBJ( true )
    call ResetUnitAnimation( gg_unit_u000_0020 )
    call DestroyEffectBJ( udg_NecroSFX )
    call DisplayTimedTextToForce( GetPlayersAll(), 8.00, "TRIGSTR_150" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), gg_unit_u000_0020, "TRIGSTR_151", null, "TRIGSTR_152", bj_TIMETYPE_SET, 8.00, false )
    call TriggerSleepAction( 4.00 )
    call ResumeMusicBJ(  )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\DarkAgents.mp3" )
    call PauseUnitBJ( false, gg_unit_u000_0020 )
    call SetUnitInvulnerable( gg_unit_u000_0020, false )
    call EnableTrigger( gg_trg_Acolyte_Dies )
    call EnableTrigger( gg_trg_Death_and_Decay )
    call EnableTrigger( gg_trg_Morbent_Eighty_Percent )
    call EnableTrigger( gg_trg_Death_Coil )
    if ( Trig_Cauldron_Dies_Func022C() ) then
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[1], bj_UNIT_FACING )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
        call UnitAddAbilityBJ( 'A009', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    else
    endif
    if ( Trig_Cauldron_Dies_Func023C() ) then
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[2], bj_UNIT_FACING )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
        call UnitAddAbilityBJ( 'A00G', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    else
    endif
    if ( Trig_Cauldron_Dies_Func024C() ) then
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[3], bj_UNIT_FACING )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
        call UnitAddAbilityBJ( 'A00A', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Cauldron_Dies takes nothing returns nothing
    set gg_trg_Cauldron_Dies = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cauldron_Dies, gg_unit_u004_0029, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cauldron_Dies, function Trig_Cauldron_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Morbent Eighty Percent
//===========================================================================
function Trig_Morbent_Eighty_Percent_Conditions takes nothing returns boolean
    if ( not ( GetUnitLifePercent(gg_unit_u000_0020) <= 80.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Morbent_Eighty_Percent_Func001Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0039) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Morbent_Eighty_Percent_Func001Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0031) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Morbent_Eighty_Percent_Func001Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_n002_0030) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Morbent_Eighty_Percent_Func001Func006C takes nothing returns boolean
    if ( ( IsUnitAliveBJ(gg_unit_n002_0039) == true ) ) then
        return true
    endif
    if ( ( IsUnitAliveBJ(gg_unit_n002_0031) == true ) ) then
        return true
    endif
    if ( ( IsUnitAliveBJ(gg_unit_n002_0030) == true ) ) then
        return true
    endif
    return false
endfunction

function Trig_Morbent_Eighty_Percent_Func001C takes nothing returns boolean
    if ( not Trig_Morbent_Eighty_Percent_Func001Func006C() ) then
        return false
    endif
    return true
endfunction

function Trig_Morbent_Eighty_Percent_Actions takes nothing returns nothing
    if ( Trig_Morbent_Eighty_Percent_Func001C() ) then
        if ( Trig_Morbent_Eighty_Percent_Func001Func001C() ) then
            call AddSpecialEffectLocBJ( udg_AcolytePoint[1], "Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl" )
            call RemoveUnit( gg_unit_n002_0039 )
            call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[1], bj_UNIT_FACING )
            call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
            call UnitAddAbilityBJ( 'A009', GetLastCreatedUnit() )
        else
        endif
        if ( Trig_Morbent_Eighty_Percent_Func001Func002C() ) then
            call AddSpecialEffectLocBJ( udg_AcolytePoint[2], "Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl" )
            call RemoveUnit( gg_unit_n002_0031 )
            call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[2], bj_UNIT_FACING )
            call UnitAddAbilityBJ( 'A00G', GetLastCreatedUnit() )
            call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        else
        endif
        if ( Trig_Morbent_Eighty_Percent_Func001Func003C() ) then
            call AddSpecialEffectLocBJ( udg_AcolytePoint[3], "Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl" )
            call RemoveUnit( gg_unit_n002_0030 )
            call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[3], bj_UNIT_FACING )
            call UnitAddAbilityBJ( 'A00A', GetLastCreatedUnit() )
            call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        else
        endif
        call DisableTrigger( GetTriggeringTrigger() )
    else
        call DisableTrigger( GetTriggeringTrigger() )
    endif
endfunction

//===========================================================================
function InitTrig_Morbent_Eighty_Percent takes nothing returns nothing
    set gg_trg_Morbent_Eighty_Percent = CreateTrigger(  )
    call DisableTrigger( gg_trg_Morbent_Eighty_Percent )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Morbent_Eighty_Percent, 1.00 )
    call TriggerAddCondition( gg_trg_Morbent_Eighty_Percent, Condition( function Trig_Morbent_Eighty_Percent_Conditions ) )
    call TriggerAddAction( gg_trg_Morbent_Eighty_Percent, function Trig_Morbent_Eighty_Percent_Actions )
endfunction

//===========================================================================
// Trigger: Acolyte Dies
//===========================================================================
function Trig_Acolyte_Dies_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetDyingUnit()) == 'n002' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Dies_Func001C takes nothing returns boolean
    if ( not ( GetDyingUnit() == gg_unit_n002_0039 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Dies_Func002C takes nothing returns boolean
    if ( not ( GetDyingUnit() == gg_unit_n002_0031 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Dies_Func003C takes nothing returns boolean
    if ( not ( GetDyingUnit() == gg_unit_n002_0030 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Dies_Actions takes nothing returns nothing
    if ( Trig_Acolyte_Dies_Func001C() ) then
        call TriggerSleepAction( 1.50 )
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[1], bj_UNIT_FACING )
        call UnitAddAbilityBJ( 'A009', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
    else
    endif
    if ( Trig_Acolyte_Dies_Func002C() ) then
        call TriggerSleepAction( 1.50 )
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[2], bj_UNIT_FACING )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
        call UnitAddAbilityBJ( 'A00G', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    else
    endif
    if ( Trig_Acolyte_Dies_Func003C() ) then
        call TriggerSleepAction( 1.50 )
        call CreateNUnitsAtLoc( 1, 'n004', Player(11), udg_AcolytePoint[3], bj_UNIT_FACING )
        call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
        call UnitAddAbilityBJ( 'A00A', GetLastCreatedUnit() )
        call AddSpecialEffectLocBJ( GetUnitLoc(GetLastCreatedUnit()), "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl" )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Acolyte_Dies takes nothing returns nothing
    set gg_trg_Acolyte_Dies = CreateTrigger(  )
    call DisableTrigger( gg_trg_Acolyte_Dies )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Acolyte_Dies, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Acolyte_Dies, Condition( function Trig_Acolyte_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Acolyte_Dies, function Trig_Acolyte_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Acolyte Animation reset
//===========================================================================
function Trig_Acolyte_Animation_reset_Func002C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetDyingUnit()) == 'n002' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Animation_reset_Conditions takes nothing returns boolean
    if ( not Trig_Acolyte_Animation_reset_Func002C() ) then
        return false
    endif
    return true
endfunction

function Trig_Acolyte_Animation_reset_Actions takes nothing returns nothing
    call ResetUnitAnimation( GetDyingUnit() )
endfunction

//===========================================================================
function InitTrig_Acolyte_Animation_reset takes nothing returns nothing
    set gg_trg_Acolyte_Animation_reset = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Acolyte_Animation_reset, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Acolyte_Animation_reset, Condition( function Trig_Acolyte_Animation_reset_Conditions ) )
    call TriggerAddAction( gg_trg_Acolyte_Animation_reset, function Trig_Acolyte_Animation_reset_Actions )
endfunction

//===========================================================================
// Trigger: Death and Decay
//===========================================================================
function Trig_Death_and_Decay_Func001001 takes nothing returns boolean
    return ( udg_MorbenFell_Booleans[3] == false )
endfunction

function Trig_Death_and_Decay_Actions takes nothing returns nothing
    loop
        exitwhen ( Trig_Death_and_Decay_Func001001() )
        call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 0.20))
    endloop
    set udg_MorbenFell_Booleans[2] = true
    call PauseUnitBJ( true, gg_unit_u000_0020 )
    call SetUnitAnimation( gg_unit_u000_0020, "channel" )
    call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_u000_0020), "Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl" )
    set udg_MF_DnDPoint = GetUnitLoc(udg_RedHero)
    call TriggerSleepAction( 1.00 )
    call CreateNUnitsAtLoc( 1, 'h004', Player(11), udg_MF_DnDPoint, bj_UNIT_FACING )
    call UnitAddAbilityBJ( 'A003', GetLastCreatedUnit() )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "deathanddecay", udg_MF_DnDPoint )
    call UnitApplyTimedLifeBJ( 30.00, 'BTLF', GetLastCreatedUnit() )
    call PauseUnitBJ( false, gg_unit_u000_0020 )
    call ResetUnitAnimation( gg_unit_u000_0020 )
    call TriggerSleepAction( 0.50 )
    set udg_MorbenFell_Booleans[2] = false
    call RemoveLocation( udg_MF_DnDPoint )
endfunction

//===========================================================================
function InitTrig_Death_and_Decay takes nothing returns nothing
    set gg_trg_Death_and_Decay = CreateTrigger(  )
    call DisableTrigger( gg_trg_Death_and_Decay )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Death_and_Decay, 10.00 )
    call TriggerAddAction( gg_trg_Death_and_Decay, function Trig_Death_and_Decay_Actions )
endfunction

//===========================================================================
// Trigger: Death Coil
//===========================================================================
function Trig_Death_Coil_Func001001 takes nothing returns boolean
    return ( udg_MorbenFell_Booleans[2] == false )
endfunction

function Trig_Death_Coil_Actions takes nothing returns nothing
    loop
        exitwhen ( Trig_Death_Coil_Func001001() )
        call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 0.20))
    endloop
    set udg_MorbenFell_Booleans[3] = true
    call PauseUnitBJ( true, gg_unit_u000_0020 )
    call SetUnitAnimation( gg_unit_u000_0020, "channel" )
    call AddSpecialEffectTargetUnitBJ( "chest", gg_unit_u000_0020, "Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl" )
    set udg_tempPoint = GetUnitLoc(udg_RedHero)
    call TriggerSleepAction( 1.50 )
    call PauseUnitBJ( false, gg_unit_u000_0020 )
    call ResetUnitAnimation( gg_unit_u000_0020 )
    call IssueTargetOrderBJ( gg_unit_u000_0020, "deathcoil", udg_RedHero )
    call TriggerSleepAction( 0.50 )
    call IssueTargetOrderBJ( gg_unit_u000_0020, "attack", udg_RedHero )
    set udg_MorbenFell_Booleans[3] = false
endfunction

//===========================================================================
function InitTrig_Death_Coil takes nothing returns nothing
    set gg_trg_Death_Coil = CreateTrigger(  )
    call DisableTrigger( gg_trg_Death_Coil )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Death_Coil, 7.00 )
    call TriggerAddAction( gg_trg_Death_Coil, function Trig_Death_Coil_Actions )
endfunction

//===========================================================================
// Trigger: Morbent Dies
//===========================================================================
function Trig_Morbent_Dies_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_Death_and_Decay )
    call DisableTrigger( gg_trg_Death_Coil )
    call ResetUnitAnimation( udg_MF_Ghost )
    call TriggerSleepAction( 2.00 )
    call AddSpecialEffectLocBJ( GetUnitLoc(gg_unit_u000_0020), "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl" )
    call TriggerSleepAction( 2.00 )
    call CreateNUnitsAtLoc( 1, 'u005', Player(11), GetRectCenter(gg_rct_MorbentFell_Ghost), bj_UNIT_FACING )
    call AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), "Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl" )
    set udg_MF_Ghost = GetLastCreatedUnit()
    call DisplayTimedTextToForce( GetPlayersAll(), 8.00, "TRIGSTR_153" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_MF_Ghost, "TRIGSTR_154", null, "TRIGSTR_155", bj_TIMETYPE_SET, 8.00, false )
    call EnableTrigger( gg_trg_Soul_Barrage )
    call EnableTrigger( gg_trg_Absorb_Soul )
    call EnableTrigger( gg_trg_Spawn_Soul )
endfunction

//===========================================================================
function InitTrig_Morbent_Dies takes nothing returns nothing
    set gg_trg_Morbent_Dies = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Morbent_Dies, gg_unit_u000_0020, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Morbent_Dies, function Trig_Morbent_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Soul Barrage
//===========================================================================
function Trig_Soul_Barrage_Func001001 takes nothing returns boolean
    return ( udg_MorbenFell_Booleans[4] == false )
endfunction

function Trig_Soul_Barrage_Actions takes nothing returns nothing
    loop
        exitwhen ( Trig_Soul_Barrage_Func001001() )
        call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 0.20))
    endloop
    set udg_MorbenFell_Booleans[5] = true
    call PauseUnitBJ( true, udg_MF_Ghost )
    call SetUnitAnimation( udg_MF_Ghost, "channel" )
    call AddSpecialEffectTargetUnitBJ( "chest", udg_MF_Ghost, "Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl" )
    call TriggerSleepAction( 1.00 )
    set udg_tempPoint = GetUnitLoc(udg_MF_Ghost)
    call CreateNUnitsAtLoc( 1, 'h005', Player(11), udg_tempPoint, bj_UNIT_FACING )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "attack", udg_RedHero )
    call UnitApplyTimedLifeBJ( 7.00, 'BTLF', GetLastCreatedUnit() )
    call TriggerSleepAction( 7.00 )
    call PauseUnitBJ( false, udg_MF_Ghost )
    call ResetUnitAnimation( udg_MF_Ghost )
    call TriggerSleepAction( 0.50 )
    set udg_MorbenFell_Booleans[5] = false
endfunction

//===========================================================================
function InitTrig_Soul_Barrage takes nothing returns nothing
    set gg_trg_Soul_Barrage = CreateTrigger(  )
    call DisableTrigger( gg_trg_Soul_Barrage )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Soul_Barrage, 20.00 )
    call TriggerAddAction( gg_trg_Soul_Barrage, function Trig_Soul_Barrage_Actions )
endfunction

//===========================================================================
// Trigger: Spawn Soul
//===========================================================================
function Trig_Spawn_Soul_Actions takes nothing returns nothing
    call CreateNUnitsAtLoc( 1, 'n005', Player(11), GetRandomLocInRect(gg_rct_GhostSpawn), bj_UNIT_FACING )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetUnitLoc(udg_RedHero) )
    call AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), "Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl" )
endfunction

//===========================================================================
function InitTrig_Spawn_Soul takes nothing returns nothing
    set gg_trg_Spawn_Soul = CreateTrigger(  )
    call DisableTrigger( gg_trg_Spawn_Soul )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Spawn_Soul, 4.00 )
    call TriggerAddAction( gg_trg_Spawn_Soul, function Trig_Spawn_Soul_Actions )
endfunction

//===========================================================================
// Trigger: Absorb Soul
//===========================================================================
function Trig_Absorb_Soul_Func003001001003001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'n005' )
endfunction

function Trig_Absorb_Soul_Func003001001003002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Absorb_Soul_Func003001001003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Absorb_Soul_Func003001001003001(), Trig_Absorb_Soul_Func003001001003002() )
endfunction

function Trig_Absorb_Soul_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsInRangeOfLocMatching(1500.00, GetUnitLoc(udg_MF_Ghost), Condition(function Trig_Absorb_Soul_Func003001001003))) >= 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Absorb_Soul_Func001001001001001002001 takes nothing returns boolean
    return ( 'n005' == GetUnitTypeId(GetFilterUnit()) )
endfunction

function Trig_Absorb_Soul_Func001001001001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Absorb_Soul_Func001001001001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Absorb_Soul_Func001001001001001002001(), Trig_Absorb_Soul_Func001001001001001002002() )
endfunction

function Trig_Absorb_Soul_Func001001001 takes nothing returns boolean
    return ( CountUnitsInGroup(GetUnitsInRectMatching(gg_rct_MorbentFel, Condition(function Trig_Absorb_Soul_Func001001001001001002))) >= 1 )
endfunction

function Trig_Absorb_Soul_Func001001002 takes nothing returns boolean
    return ( udg_MorbenFell_Booleans[5] == false )
endfunction

function Trig_Absorb_Soul_Func001001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Absorb_Soul_Func001001001(), Trig_Absorb_Soul_Func001001002() )
endfunction

function Trig_Absorb_Soul_Func006002001003001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'n005' )
endfunction

function Trig_Absorb_Soul_Func006002001003002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Absorb_Soul_Func006002001003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Absorb_Soul_Func006002001003001(), Trig_Absorb_Soul_Func006002001003002() )
endfunction

function Trig_Absorb_Soul_Func009C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_AbsorbSoulUnit) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Absorb_Soul_Actions takes nothing returns nothing
    loop
        exitwhen ( Trig_Absorb_Soul_Func001001() )
        call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 0.20))
    endloop
    set udg_MorbenFell_Booleans[4] = true
    call PauseUnitBJ( true, udg_MF_Ghost )
    call SetUnitAnimation( udg_MF_Ghost, "channel" )
    set udg_AbsorbSoulUnit = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(2000.00, GetUnitLoc(udg_MF_Ghost), Condition(function Trig_Absorb_Soul_Func006002001003)))
    call AddSpecialEffectTargetUnitBJ( "chest", udg_AbsorbSoulUnit, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl" )
    call TriggerSleepAction( 8.00 )
    if ( Trig_Absorb_Soul_Func009C() ) then
        call AddSpecialEffectTargetUnitBJ( "origin", udg_AbsorbSoulUnit, "Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl" )
        call SetUnitLifeBJ( udg_MF_Ghost, ( GetUnitStateSwap(UNIT_STATE_LIFE, udg_AbsorbSoulUnit) + ( GetUnitStateSwap(UNIT_STATE_LIFE, udg_MF_Ghost) * 2.00 ) ) )
        call KillUnit( udg_AbsorbSoulUnit )
    else
    endif
    call PauseUnitBJ( false, udg_MF_Ghost )
    call ResetUnitAnimation( udg_MF_Ghost )
    call TriggerSleepAction( 0.50 )
    set udg_MorbenFell_Booleans[4] = false
endfunction

//===========================================================================
function InitTrig_Absorb_Soul takes nothing returns nothing
    set gg_trg_Absorb_Soul = CreateTrigger(  )
    call DisableTrigger( gg_trg_Absorb_Soul )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Absorb_Soul, 20.00 )
    call TriggerAddCondition( gg_trg_Absorb_Soul, Condition( function Trig_Absorb_Soul_Conditions ) )
    call TriggerAddAction( gg_trg_Absorb_Soul, function Trig_Absorb_Soul_Actions )
endfunction

//===========================================================================
// Trigger: Absorb Soul Dies
//===========================================================================
function Trig_Absorb_Soul_Dies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_AbsorbSoulUnit ) ) then
        return false
    endif
    return true
endfunction

function Trig_Absorb_Soul_Dies_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.50 )
    call PauseUnitBJ( false, udg_MF_Ghost )
    call ResetUnitAnimation( udg_MF_Ghost )
    set udg_MorbenFell_Booleans[4] = false
endfunction

//===========================================================================
function InitTrig_Absorb_Soul_Dies takes nothing returns nothing
    set gg_trg_Absorb_Soul_Dies = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Absorb_Soul_Dies, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Absorb_Soul_Dies, Condition( function Trig_Absorb_Soul_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Absorb_Soul_Dies, function Trig_Absorb_Soul_Dies_Actions )
endfunction

//===========================================================================
// Trigger: MF Dies
//===========================================================================
function Trig_MF_Dies_Conditions takes nothing returns boolean
    if ( not ( udg_MF_Ghost == GetDyingUnit() ) ) then
        return false
    endif
    return true
endfunction

function Trig_MF_Dies_Func008002 takes nothing returns nothing
    call KillUnit( GetEnumUnit() )
endfunction

function Trig_MF_Dies_Func015Func004001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_MFQuestRequirements[1]) == true )
endfunction

function Trig_MF_Dies_Func015Func004002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_MFQuestRequirements[2]) == true )
endfunction

function Trig_MF_Dies_Func015C takes nothing returns boolean
    if ( not GetBooleanAnd( Trig_MF_Dies_Func015Func004001(), Trig_MF_Dies_Func015Func004002() ) ) then
        return false
    endif
    return true
endfunction

function Trig_MF_Dies_Func016Func004001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_MFQuestRequirements[3]) == true )
endfunction

function Trig_MF_Dies_Func016Func004002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_MFQuestRequirements[4]) == true )
endfunction

function Trig_MF_Dies_Func016C takes nothing returns boolean
    if ( not GetBooleanAnd( Trig_MF_Dies_Func016Func004001(), Trig_MF_Dies_Func016Func004002() ) ) then
        return false
    endif
    return true
endfunction

function Trig_MF_Dies_Func017Func003C takes nothing returns boolean
    if ( ( IsQuestCompleted(udg_MFQuests[1]) == true ) ) then
        return true
    endif
    if ( ( IsQuestCompleted(udg_MFQuests[2]) == true ) ) then
        return true
    endif
    return false
endfunction

function Trig_MF_Dies_Func017C takes nothing returns boolean
    if ( not Trig_MF_Dies_Func017Func003C() ) then
        return false
    endif
    return true
endfunction

function Trig_MF_Dies_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_Absorb_Soul )
    call DisableTrigger( gg_trg_Spawn_Soul )
    call DisableTrigger( gg_trg_Soul_Barrage )
    call ResetUnitAnimation( udg_MF_Ghost )
    call DisplayTimedTextToForce( GetPlayersAll(), 4.50, "TRIGSTR_156" )
    call PlaySoundBJ( gg_snd_KelThuzadDeath1 )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_MF_Ghost, "TRIGSTR_157", null, "TRIGSTR_158", bj_TIMETYPE_SET, 4.50, true )
    call ForGroupBJ( GetUnitsInRectOfPlayer(gg_rct_MorbentFel, Player(11)), function Trig_MF_Dies_Func008002 )
    call TriggerSleepAction( 0.75 )
    call ResetUnitAnimation( udg_MF_Ghost )
    call PlaySoundBJ( gg_snd_QuestCompleted )
    call QuestItemSetCompletedBJ( udg_MFQuestRequirements[2], true )
    call QuestItemSetCompletedBJ( udg_MFQuestRequirements[4], true )
    call TriggerSleepAction( 2.00 )
    if ( Trig_MF_Dies_Func015C() ) then
        call FlashQuestDialogButtonBJ(  )
        call QuestSetCompletedBJ( udg_MFQuests[1], true )
        call DisplayTextToForce( GetPlayersAll(), "TRIGSTR_286" )
    else
    endif
    if ( Trig_MF_Dies_Func016C() ) then
        call FlashQuestDialogButtonBJ(  )
        call QuestSetCompletedBJ( udg_MFQuests[2], true )
        call DisplayTextToForce( GetPlayersAll(), "TRIGSTR_285" )
    else
    endif
    if ( Trig_MF_Dies_Func017C() ) then
        call PlaySoundBJ( gg_snd_GoodJob )
    else
        call DisplayTextToForce( GetPlayersAll(), "TRIGSTR_288" )
    endif
    call TriggerSleepAction( 4.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUTIN, 3.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.50 )
    call PauseAllUnitsBJ( true )
    call SetCameraBoundsToRectForPlayerBJ( Player(0), gg_rct_Oasis )
    call SetUnitPositionLocFacingBJ( udg_RedHero, GetRectCenter(gg_rct_Oasis), 90.00 )
    call SetCameraBoundsToRectForPlayerBJ( Player(0), gg_rct_Oasis )
    call PanCameraToTimedLocForPlayer( Player(0), GetRectCenter(gg_rct_Oasis), 0 )
    call TriggerSleepAction( 1.50 )
    call PauseAllUnitsBJ( false )
endfunction

//===========================================================================
function InitTrig_MF_Dies takes nothing returns nothing
    set gg_trg_MF_Dies = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_MF_Dies, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_MF_Dies, Condition( function Trig_MF_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_MF_Dies, function Trig_MF_Dies_Actions )
endfunction

//===========================================================================
// Trigger: MF Create Achievements
//===========================================================================
function Trig_MF_Create_Achievements_Actions takes nothing returns nothing
    call CreateQuestBJ( bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_265", "TRIGSTR_266", "ReplaceableTextures\\CommandButtons\\BTNAcolyte.blp" )
    set udg_MFQuests[1] = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( GetLastCreatedQuestBJ(), "TRIGSTR_268" )
    set udg_MFQuestRequirements[1] = GetLastCreatedQuestItemBJ()
    call CreateQuestItemBJ( GetLastCreatedQuestBJ(), "TRIGSTR_269" )
    set udg_MFQuestRequirements[2] = GetLastCreatedQuestItemBJ()
    call CreateQuestBJ( bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_263", "TRIGSTR_264", "ReplaceableTextures\\CommandButtons\\BTNSacrificialPit.blp" )
    set udg_MFQuests[2] = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( GetLastCreatedQuestBJ(), "TRIGSTR_272" )
    set udg_MFQuestRequirements[3] = GetLastCreatedQuestItemBJ()
    call CreateQuestItemBJ( GetLastCreatedQuestBJ(), "TRIGSTR_273" )
    set udg_MFQuestRequirements[4] = GetLastCreatedQuestItemBJ()
    call FlashQuestDialogButtonBJ(  )
endfunction

//===========================================================================
function InitTrig_MF_Create_Achievements takes nothing returns nothing
    set gg_trg_MF_Create_Achievements = CreateTrigger(  )
    call TriggerRegisterTimerEventSingle( gg_trg_MF_Create_Achievements, 0.01 )
    call TriggerAddAction( gg_trg_MF_Create_Achievements, function Trig_MF_Create_Achievements_Actions )
endfunction

//===========================================================================
// Trigger: Lightning Enhancement Effect
//===========================================================================
function Trig_Lightning_Enhancement_Effect_Func001002002 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'o003' )
endfunction

function Trig_Lightning_Enhancement_Effect_Func002A takes nothing returns nothing
    set udg_tempUnit = GetEnumUnit()
endfunction

function Trig_Lightning_Enhancement_Effect_Func005002003001 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_tempUnit)) == true )
endfunction

function Trig_Lightning_Enhancement_Effect_Func005002003002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Lightning_Enhancement_Effect_Func005002003 takes nothing returns boolean
    return GetBooleanAnd( Trig_Lightning_Enhancement_Effect_Func005002003001(), Trig_Lightning_Enhancement_Effect_Func005002003002() )
endfunction

function Trig_Lightning_Enhancement_Effect_Func006A takes nothing returns nothing
    set udg_tempPoint2 = GetUnitLoc(GetEnumUnit())
    call CreateNUnitsAtLoc( 1, 'h004', GetOwningPlayer(udg_tempUnit), udg_tempPoint, bj_UNIT_FACING )
    call UnitAddAbilityBJ( 'A01C', GetLastCreatedUnit() )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "chainlightning", GetEnumUnit() )
    call UnitApplyTimedLifeBJ( 1.00, 'BTLF', GetLastCreatedUnit() )
    call UnitDamageTargetBJ( udg_tempUnit, GetEnumUnit(), ( 25.00 + ( DistanceBetweenPoints(udg_tempPoint2, udg_tempPoint) / 4.00 ) ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING )
    call RemoveLocation(udg_tempPoint2)
endfunction

function Trig_Lightning_Enhancement_Effect_Actions takes nothing returns nothing
    set udg_tempUGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Lightning_Enhancement_Effect_Func001002002))
    call ForGroupBJ( udg_tempUGroup, function Trig_Lightning_Enhancement_Effect_Func002A )
    call DestroyGroup(udg_tempUGroup)
    set udg_tempPoint = GetUnitLoc(udg_tempUnit)
    set udg_tempUGroup = GetUnitsInRangeOfLocMatching(3000.00, udg_tempPoint, Condition(function Trig_Lightning_Enhancement_Effect_Func005002003))
    call ForGroupBJ( udg_tempUGroup, function Trig_Lightning_Enhancement_Effect_Func006A )
    call RemoveLocation(udg_tempPoint)
    call DestroyGroup(udg_tempUGroup)
endfunction

//===========================================================================
function InitTrig_Lightning_Enhancement_Effect takes nothing returns nothing
    set gg_trg_Lightning_Enhancement_Effect = CreateTrigger(  )
    call DisableTrigger( gg_trg_Lightning_Enhancement_Effect )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Lightning_Enhancement_Effect, 0.50 )
    call TriggerAddAction( gg_trg_Lightning_Enhancement_Effect, function Trig_Lightning_Enhancement_Effect_Actions )
endfunction

//===========================================================================
// Trigger: Earthquake
//===========================================================================
function Trig_Earthquake_Actions takes nothing returns nothing
    set udg_tempPoint = GetRandomLocInRect(gg_rct_Earthquake_TestRegion)
    call CreateNUnitsAtLoc( 1, 'h004', Player(11), udg_tempPoint, bj_UNIT_FACING )
    call UnitAddAbilityBJ( 'A01F', GetLastCreatedUnit() )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "earthquake", udg_tempPoint )
    call UnitApplyTimedLifeBJ( 20.00, 'BTLF', GetLastCreatedUnit() )
    call RemoveLocation(udg_tempPoint)
endfunction

//===========================================================================
function InitTrig_Earthquake takes nothing returns nothing
    set gg_trg_Earthquake = CreateTrigger(  )
    call DisableTrigger( gg_trg_Earthquake )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Earthquake, 5.00 )
    call TriggerAddAction( gg_trg_Earthquake, function Trig_Earthquake_Actions )
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Custom_Init(  )
    call InitTrig_Untitled_Trigger_005(  )
    call InitTrig_Untitled_Trigger_006(  )
    call InitTrig_Untitled_Trigger_007(  )
    call InitTrig_Repeat_Music(  )
    call InitTrig_Untitled_Trigger_001(  )
    call InitTrig_Mana_Regeneration(  )
    call InitTrig_Healing_Potion_Effect(  )
    call InitTrig_Buy_SPells(  )
    call InitTrig_Remove_Q_Spells(  )
    call InitTrig_Remove_E_Spells(  )
    call InitTrig_Remove_W_Spells(  )
    call InitTrig_Remove_R_Spells(  )
    call InitTrig_Untitled_Trigger_003(  )
    call InitTrig_Healing_Stone(  )
    call InitTrig_Volcano_Strike(  )
    call InitTrig_Blizzard_Start(  )
    call InitTrig_Blizzard_Stop(  )
    call InitTrig_Blizzard_Slow(  )
    call InitTrig_Arcane_Power(  )
    call InitTrig_Arcane_Emp_End(  )
    call InitTrig_Arcane_Emp_Move_Sfx(  )
    call InitTrig_Arcane_Discharge(  )
    call InitTrig_Arcane_Depletion(  )
    call InitTrig_Burn(  )
    call InitTrig_Shock(  )
    call InitTrig_Shock_Destory_Effect(  )
    call InitTrig_Magic_Ward_Start(  )
    call InitTrig_Untitled_Trigger_002(  )
    call InitTrig_Magic_Ward_Update(  )
    call InitTrig_Magic_Ward_Pause_Effect(  )
    call InitTrig_Magic_Ward_End(  )
    call InitTrig_Magic_Ward_Delayed_SFX_Destruction(  )
    call InitTrig_Ice_Lance_Start(  )
    call InitTrig_Ice_Lance_Move(  )
    call InitTrig_Ice_Lance_Damage(  )
    call InitTrig_Arcane_Barrage_Start(  )
    call InitTrig_Arcane_Barrage_Buff(  )
    call InitTrig_Arcane_Barrage_Fall(  )
    call InitTrig_Arcane_Barrage_Damage(  )
    call InitTrig_Arcane_Barrage_End(  )
    call InitTrig_Unstable_Magic_Start(  )
    call InitTrig_Unstable_Magic_Stop(  )
    call InitTrig_Event_Init(  )
    call InitTrig_Morbent_Init_Trigger(  )
    call InitTrig_Time_runs_out(  )
    call InitTrig_Acolyte_Animation(  )
    call InitTrig_Ghoul_Spawn(  )
    call InitTrig_Plague_Zombie_Spawn(  )
    call InitTrig_Skeletal_Mages(  )
    call InitTrig_Skeleton_Spawns(  )
    call InitTrig_Zone_Exit(  )
    call InitTrig_MF_Phase_2_Init(  )
    call InitTrig_Necromancer_Death(  )
    call InitTrig_Cauldron_Dies(  )
    call InitTrig_Morbent_Eighty_Percent(  )
    call InitTrig_Acolyte_Dies(  )
    call InitTrig_Acolyte_Animation_reset(  )
    call InitTrig_Death_and_Decay(  )
    call InitTrig_Death_Coil(  )
    call InitTrig_Morbent_Dies(  )
    call InitTrig_Soul_Barrage(  )
    call InitTrig_Spawn_Soul(  )
    call InitTrig_Absorb_Soul(  )
    call InitTrig_Absorb_Soul_Dies(  )
    call InitTrig_MF_Dies(  )
    call InitTrig_MF_Create_Achievements(  )
    call InitTrig_Lightning_Enhancement_Effect(  )
    call InitTrig_Earthquake(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Custom_Init )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation( Player(0), 0 )
    call SetPlayerColor( Player(0), ConvertPlayerColor(0) )
    call SetPlayerRacePreference( Player(0), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(0), false )
    call SetPlayerController( Player(0), MAP_CONTROL_USER )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_002
    call SetPlayerTeam( Player(0), 0 )

endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl" )
    call NewSoundEnvironment( "Default" )
    call SetAmbientDaySound( "CityScapeDay" )
    call SetAmbientNightSound( "CityScapeNight" )
    call SetMapMusic( "Music", true, 0 )
    call InitSounds(  )
    call CreateRegions(  )
    call CreateAllDestructables(  )
    call CreateAllItems(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "TRIGSTR_006" )
    call SetMapDescription( "TRIGSTR_008" )
    call SetPlayers( 1 )
    call SetTeams( 1 )
    call SetGamePlacement( MAP_PLACEMENT_USE_MAP_SETTINGS )

    call DefineStartLocation( 0, -7872.0, -128.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call InitCustomTeams(  )
endfunction

